<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <div class="article-copyright">
                  					
        版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/u013914471/article/details/83748571				</div>
                                <div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                <!-- flowchart 箭头图标 勿删 -->
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
                <p></p><div class="toc"><h3><a name="t0"></a>Apollo代码学习—横纵向控制</h3><ul><li><a href="#_2" rel="nofollow" target="_self">前言</a></li><li><a href="#_6" rel="nofollow" target="_self">纵向控制</a></li><li><a href="#_142" rel="nofollow" target="_self">横向控制</a></li><ul><li><a href="#_148" rel="nofollow" target="_self">前馈控制</a></li><li><a href="#_176" rel="nofollow" target="_self">反馈控制</a></li></ul><li><a href="#_334" rel="nofollow" target="_self">总结</a></li><li><a href="#_20181128_338" rel="nofollow" target="_self">补充 2018.11.28</a></li></ul></div><p></p>
<h1><a name="t1"></a><a id="_2" target="_blank"></a>前言</h1>
<p>在我的第一篇博文：<a href="https://blog.csdn.net/u013914471/article/details/82775091" rel="nofollow" target="_blank">Apollo代码学习(一)—控制模块概述</a>中，对横纵向控制做了基本概述，现在做一些详细分析。</p>
<h1><a name="t2"></a><a id="_6" target="_blank"></a>纵向控制</h1>
<p>纵向控制主要为速度控制，通过控制刹车、油门、档位等实现对车速的控制，对于自动挡车辆来说，控制对象其实就是<code>刹车</code>和<code>油门</code>。</p>
<div align="center"><img src="https://img-blog.csdn.net/2018091917092752?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></div>
<center>图1  纵向控制</center>
<p>Apollo纵向控制的工作原理如图1所示。它主要由“位移-速度闭环<a href="https://www.baidu.com/s?wd=PID%E6%8E%A7%E5%88%B6%E5%99%A8&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank">PID控制器</a>”、“速度-加速度闭环PID控制器”和“速度-加速度-刹车/油门”开环控制器构成。</p>
<div class="table-box"><table><tbody>
<tr>
<th colspan="2">位置PID<a href="https://www.baidu.com/s?wd=%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank">闭环控制</a>器</th>
<th colspan="2">速度PID闭环控制器</th>
<th colspan="2">标定表开环控制器</th>
</tr>
<tr>
<td>输入</td>
<td>期望位置+当前实际位置</td>
<td>输入</td>
<td>速度补偿+当前位置速度偏差</td>
<td>输入</td>
<td>加速度补偿+规划加速度，当前车速</td>
</tr>
<tr>
<td>输出</td>
<td>速度补偿量</td>
<td>输出</td>
<td>加速度补偿量</td>
<td>输出</td>
<td>油门/刹车控制量</td>
</tr>
</tbody></table></div>  
<p>以不加预估的控制为例，apollo纵向控制中计算纵向误差的原理：</p>
<div align="center"><img src="https://img-blog.csdnimg.cn/20181105154034783.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=,size_16,color_FFFFFF,t_70"></div>
<center>图2 纵向控制计算流程</center>
<p>其中，重要的是纵向误差的计算，纵向误差包含两个状态变量：</p>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 速度误差(<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      speed\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 6.25em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.231em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1005.21em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span style="display: inline-block; position: relative; width: 5.231em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1005.21em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-3"><span class="mrow" id="MathJax-Span-4"><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.16em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      speed\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-1"><math><semantics><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">speed\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>)</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 位置误差(<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      station\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-16" style="width: 7.075em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-17"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-18"><span class="mrow" id="MathJax-Span-19"><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-32" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 0.964em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      station\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-2"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">station\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>)</li>
</ul>
<p>跟计算纵向误差相关的函数主要是：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)"><span class="token keyword">void</span> TrajectoryAnalyzer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToTrajectoryFrame</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">double</span> y<span class="token punctuation">,</span>
                               <span class="token keyword">const</span> <span class="token keyword">double</span> theta<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">double</span> v<span class="token punctuation">,</span>
                               <span class="token keyword">const</span> PathPoint <span class="token operator">&amp;</span>ref_point<span class="token punctuation">,</span>
                               <span class="token keyword">double</span> <span class="token operator">*</span>ptr_s<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>ptr_s_dot<span class="token punctuation">,</span>
                               <span class="token keyword">double</span> <span class="token operator">*</span>ptr_d<span class="token punctuation">,</span>
                               <span class="token keyword">double</span> <span class="token operator">*</span>ptr_d_dot<span class="token punctuation">)</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre>
<p>计算的原理和<a href="https://blog.csdn.net/u013914471/article/details/83018664" rel="nofollow" target="_blank">Apollo代码学习(三)—车辆动力学模型</a>中的图5类似，由<a href="https://download.csdn.net/download/u013914471/10739956" rel="nofollow" target="_blank">Optimal Trajectory Generation for Dynamic Street Scenarios in a Frenet Frame</a>中的图3转化而来：</p>
<div align="center"><img src="https://img-blog.csdn.net/20180919191935469?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></div>
<center>图3  Frenét框架下的轨迹</center>
<p>与图3的区别是，图4不假设由<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>R</mi><mi>e</mi><mi>a</mi><msub><mi>l</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Real_point</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-33" style="width: 5.079em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.274em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1004.24em, 4.409em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-34"><span style="display: inline-block; position: relative; width: 4.274em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1004.24em, 4.409em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-35"><span class="mrow" id="MathJax-Span-36"><span class="mi" id="MathJax-Span-37" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="msub" id="MathJax-Span-40"><span style="display: inline-block; position: relative; width: 0.729em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1000.27em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math; font-style: italic;">l</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.298em;"><span class="mi" id="MathJax-Span-42" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.393em; border-left: 0px solid; width: 0px; height: 1.271em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>e</mi><mi>a</mi><msub><mi>l</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">      Real_point</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-3"><math><semantics><mrow><mi>R</mi><mi>e</mi><mi>a</mi><msub><mi>l</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Real_point</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit">e</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.01968em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">o</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">t</span></span></span></span></span>指向<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>D</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>r</mi><msub><mi>e</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Desire_point</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-47" style="width: 6.25em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.247em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1005.22em, 4.409em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-48"><span style="display: inline-block; position: relative; width: 5.247em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1005.22em, 4.409em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-49"><span class="mrow" id="MathJax-Span-50"><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-54" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="msub" id="MathJax-Span-56"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math; font-style: italic;">e</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.466em;"><span class="mi" id="MathJax-Span-58" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.393em; border-left: 0px solid; width: 0px; height: 1.258em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>r</mi><msub><mi>e</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">      Desire_point</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-4"><math><semantics><mrow><mi>D</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>r</mi><msub><mi>e</mi><mi>p</mi></msub><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Desire_point</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">o</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">t</span></span></span></span></span>的向量和<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>V</mi><mi>x</mi></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      V_x</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-63" style="width: 1.261em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.062em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1001.06em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-64"><span style="display: inline-block; position: relative; width: 1.062em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1001.06em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-65"><span class="mrow" id="MathJax-Span-66"><span class="msub" id="MathJax-Span-67"><span style="display: inline-block; position: relative; width: 1.062em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-68" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.583em;"><span class="mi" id="MathJax-Span-69" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.239em; border-left: 0px solid; width: 0px; height: 1.104em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">      V_x</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-5"><math><semantics><mrow><msub><mi>V</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">V_x</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>一定垂直，因为在<a href="https://github.com/ApolloAuto/apollo/blob/master/modules/control/common/trajectory_analyzer.cc" rel="nofollow" target="_blank">trajectory_analyzer.cc</a>的注释中有：</p>
<pre class="prettyprint"><code class="has-numbering">// reference: Optimal trajectory generation for dynamic street scenarios in a
// FrenÃ©t Frame,
// Moritz Werling, Julius Ziegler, SÃ¶ren Kammel and Sebastian Thrun, ICRA 2010
// similar to the method in this paper without the assumption the "normal"
// vector
// (from vehicle position to ref_point position) and reference heading are
// perpendicular.
</code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre>
<div align="center"><img src="https://img-blog.csdnimg.cn/2018112718351396.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=,size_16,color_FFFFFF,t_70"></div>
<center>图4  Frenét框架下的误差计算</center>
<p>位置误差的计算：</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)"><span class="token comment">// trajectory_analyzer.cc</span>
<span class="token keyword">double</span> dx <span class="token operator">=</span> x <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> dy <span class="token operator">=</span> y <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> dot_rd_nd <span class="token operator">=</span> dx <span class="token operator">*</span> cos_ref_theta <span class="token operator">+</span> dy <span class="token operator">*</span> sin_ref_theta<span class="token punctuation">;</span>
<span class="token operator">*</span>ptr_s <span class="token operator">=</span> ref_point<span class="token punctuation">.</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dot_rd_nd<span class="token punctuation">;</span>

<span class="token comment">// lon_controller.cc</span>
<span class="token comment">// s_matched即上面的ptr_s </span>
debug<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_station_error</span><span class="token punctuation">(</span>reference_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> s_matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li></ul></pre>
<p>由此可知，位置误差为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>&amp;#x2212;</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>&amp;#x2217;</mo><mi>cos</mi><mo>&amp;#x2061;</mo><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>&amp;#x2217;</mo><mi>sin</mi><mo>&amp;#x2061;</mo><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      station\_error=-(dx*\cos{\theta_{des}} + dy*\sin{\theta_{des}}) \tag{1}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-70" style="width: 100%; display: inline-block; min-width: 24.274em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 24.274em;"><span style="position: absolute; clip: rect(3.087em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-71"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 24.274em;"><span style="position: absolute; clip: rect(3.087em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-72"><span class="mtable" id="MathJax-Span-73" style="min-width: 24.274em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 24.274em;"><span style="display: inline-block; position: absolute; width: 20.118em; height: 0px; clip: rect(-0.905em, 1020.02em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -10.059em;"><span style="position: absolute; clip: rect(3.137em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 20.118em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1020.02em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-77"><span class="mrow" id="MathJax-Span-78"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1020.02em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -10.059em;"><span class="mrow" id="MathJax-Span-79"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-86" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-89" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-93" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-94" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mo" id="MathJax-Span-95" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-97" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-98" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Main; padding-left: 0.222em;">cos</span><span class="mo" id="MathJax-Span-100"></span><span class="msub" id="MathJax-Span-101" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-103"><span class="mi" id="MathJax-Span-104" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-105" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-106" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-107" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-110" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Main; padding-left: 0.222em;">sin</span><span class="mo" id="MathJax-Span-112"></span><span class="msub" id="MathJax-Span-113" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-114" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-115"><span class="mi" id="MathJax-Span-116" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-117" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-118" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-74"><span class="mrow" id="MathJax-Span-75"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-76" style="font-family: MathJax_Main;">(1)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>−</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      station\_error=-(dx*\cos{\theta_{des}} + dy*\sin{\theta_{des}}) \tag{1}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-6"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>−</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">station\_error=-(dx*\cos{\theta_{des}} + dy*\sin{\theta_{des}}) \tag{1}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 1.06em; vertical-align: -0.31em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>速度误差的计算：</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)"><span class="token comment">// trajectory_analyzer.cc</span>
<span class="token keyword">double</span> cross_rd_nd <span class="token operator">=</span> cos_ref_theta <span class="token operator">*</span> dy <span class="token operator">-</span> sin_ref_theta <span class="token operator">*</span> dx<span class="token punctuation">;</span>
<span class="token operator">*</span>ptr_d <span class="token operator">=</span> cross_rd_nd<span class="token punctuation">;</span>

<span class="token keyword">double</span> delta_theta <span class="token operator">=</span> theta <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> cos_delta_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>delta_theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> sin_delta_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>delta_theta<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> one_minus_kappa_r_d <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">kappa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>ptr_d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>one_minus_kappa_r_d <span class="token operator">&lt;=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
AERROR <span class="token operator">&lt;&lt;</span> <span class="token string">"TrajectoryAnalyzer::ToTrajectoryFrame "</span>
  <span class="token string">"found fatal reference and actual difference. "</span>
  <span class="token string">"Control output might be unstable:"</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.kappa:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">kappa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.x:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.y:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" car x:"</span> <span class="token operator">&lt;&lt;</span> x
<span class="token operator">&lt;&lt;</span> <span class="token string">" car y:"</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">" *ptr_d:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>ptr_d
<span class="token operator">&lt;&lt;</span> <span class="token string">" one_minus_kappa_r_d:"</span> <span class="token operator">&lt;&lt;</span> one_minus_kappa_r_d<span class="token punctuation">;</span>
<span class="token comment">// currently set to a small value to avoid control crash.</span>
one_minus_kappa_r_d <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">*</span>ptr_s_dot <span class="token operator">=</span> v <span class="token operator">*</span> cos_delta_theta <span class="token operator">/</span> one_minus_kappa_r_d<span class="token punctuation">;</span>

<span class="token comment">// lon_controller.cc</span>
<span class="token comment">// s_dot_matched即上面的ptr_s_dot </span>
debug<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_speed_error</span><span class="token punctuation">(</span>reference_point<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> s_dot_matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li><li style="color: rgb(153, 153, 153);">27</li></ul></pre>
<p>由此可知，速度误差为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>&amp;#x2212;</mo><mi>V</mi><mo>&amp;#x2217;</mo><mi>cos</mi><mo>&amp;#x2061;</mo><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x394;</mi><mi>&amp;#x3B8;</mi></mrow><mi mathvariant=&quot;normal&quot;>/</mi><mi>k</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      speed\_error=V_{des} - V*\cos{\Delta\theta}/k \tag{2}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-120" style="width: 100%; display: inline-block; min-width: 19.173em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 19.173em;"><span style="position: absolute; clip: rect(3.087em, 1015em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-121"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 19.173em;"><span style="position: absolute; clip: rect(3.087em, 1015em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-122"><span class="mtable" id="MathJax-Span-123" style="min-width: 19.173em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 19.173em;"><span style="display: inline-block; position: absolute; width: 15.017em; height: 0px; clip: rect(-0.905em, 1015em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -7.508em;"><span style="position: absolute; clip: rect(3.137em, 1015em, 4.397em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 15.017em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1015em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-127"><span class="mrow" id="MathJax-Span-128"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1015em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -7.508em;"><span class="mrow" id="MathJax-Span-129"><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-131" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-134" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-135" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-136" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-139" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-140" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-141" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msub" id="MathJax-Span-142" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-143" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.583em;"><span class="mrow" id="MathJax-Span-144"><span class="mi" id="MathJax-Span-145" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-146" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-148" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-149" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility; padding-left: 0.222em;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span class="mo" id="MathJax-Span-150" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-151" style="font-family: MathJax_Main; padding-left: 0.222em;">cos</span><span class="mo" id="MathJax-Span-152"></span><span class="mrow" id="MathJax-Span-153" style="padding-left: 0.167em;"><span class="mi" id="MathJax-Span-154" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-155" style="font-family: MathJax_Math; font-style: italic;">θ</span></span><span class="mi" id="MathJax-Span-156" style="font-family: MathJax_Main;">/</span><span class="mi" id="MathJax-Span-157" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-124"><span class="mrow" id="MathJax-Span-125"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-126" style="font-family: MathJax_Main;">(2)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>−</mo><mi>V</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><mrow><mi mathvariant="normal">Δ</mi><mi>θ</mi></mrow><mi mathvariant="normal">/</mi><mi>k</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      speed\_error=V_{des} - V*\cos{\Delta\theta}/k \tag{2}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-7"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>−</mo><mi>V</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><mrow><mi mathvariant="normal">Δ</mi><mi>θ</mi></mrow><mi mathvariant="normal">/</mi><mi>k</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">speed\_error=V_{des} - V*\cos{\Delta\theta}/k \tag{2}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord">Δ</span><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span><span class="mord">/</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span></span><span class="tag"><span class="strut" style="height: 1.06em; vertical-align: -0.31em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      V_{des}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-158" style="width: 2.042em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1001.69em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-159"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1001.69em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-160"><span class="mrow" id="MathJax-Span-161"><span class="msub" id="MathJax-Span-162"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.583em;"><span class="mrow" id="MathJax-Span-164"><span class="mi" id="MathJax-Span-165" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-166" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-167" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.239em; border-left: 0px solid; width: 0px; height: 1.104em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      V_{des}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-8"><math><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{des}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为期望车辆线速度，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>V</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      V</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-168" style="width: 0.957em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.769em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-169"><span style="display: inline-block; position: relative; width: 0.769em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-170"><span class="mrow" id="MathJax-Span-171"><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.078em; border-left: 0px solid; width: 0px; height: 0.942em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">      V</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-9"><math><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.22222em;">V</span></span></span></span></span>为当前车辆线速度，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x394;</mi><mi>&amp;#x3B8;</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      \Delta\theta</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-173" style="width: 1.564em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.302em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.146em, 1001.3em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-174"><span style="display: inline-block; position: relative; width: 1.302em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1001.3em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-175"><span class="mrow" id="MathJax-Span-176"><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-178" style="font-family: MathJax_Math; font-style: italic;">θ</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.064em; border-left: 0px solid; width: 0px; height: 0.967em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">      \Delta\theta</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-10"><math><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">\Delta\theta</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">Δ</span><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span></span></span></span>为航向误差，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>k</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      k</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-179" style="width: 0.653em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.521em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1000.5em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-180"><span style="display: inline-block; position: relative; width: 0.521em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1000.5em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-181"><span class="mrow" id="MathJax-Span-182"><span class="mi" id="MathJax-Span-183" style="font-family: MathJax_Math; font-style: italic;">k</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.942em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">      k</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-11"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.03148em;">k</span></span></span></span></span>为系数，即代码中的<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>o</mi><mi>n</mi><mi>e</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>k</mi><mi>a</mi><mi>p</mi><mi>p</mi><mi>a</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>r</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>d</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      one\_minus\_kappa\_r\_d</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-184" style="width: 11.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.974em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1009.97em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-185"><span style="display: inline-block; position: relative; width: 9.974em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1009.97em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-186"><span class="mrow" id="MathJax-Span-187"><span class="mi" id="MathJax-Span-188" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-190" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-191" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-192" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-193" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-194" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-195" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-196" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-198" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mi" id="MathJax-Span-199" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-201" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-202" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-203" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-204" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-205" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.16em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>n</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi>a</mi><mi>p</mi><mi>p</mi><mi>a</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">      one\_minus\_kappa\_r\_d</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-12"><math><semantics><mrow><mi>o</mi><mi>n</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi>a</mi><mi>p</mi><mi>p</mi><mi>a</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">one\_minus\_kappa\_r\_d</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">s</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">d</span></span></span></span></span> 。</p>
<p>求得位移误差和速度误差后，结合“位移-速度闭环PID控制器”和“速度-加速度闭环PID控制器”，求得刹车/油门标定表的两个输入量：速度和加速度，利用插值计算在标定表中查找相应的控制命令值。</p>
<p>Apollo所用的PID控制器就是一般的位置型PID控制器：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>u</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>=</mo><msub><mi>K</mi><mi>P</mi></msub><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>I</mi></msub><munderover><mo>&amp;#x2211;</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mi>e</mi><mo>(</mo><mi>i</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>D</mi></msub><mo>[</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>&amp;#x2212;</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo>)</mo><mo>]</mo><mo>+</mo><mi>u</mi><mo>(</mo><mn>0</mn><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      u(k)=K_Pe(k)+K_I\sum_{i=0}^k e(i)+K_D[e(k)-e(k-1)]+u(0) \tag{3}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-207" style="width: 100%; display: inline-block; min-width: 33.003em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 33.003em;"><span style="position: absolute; clip: rect(2.712em, 1028.67em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-208"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 33.003em;"><span style="position: absolute; clip: rect(2.712em, 1028.67em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-209"><span class="mtable" id="MathJax-Span-210" style="min-width: 33.003em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 33.003em;"><span style="display: inline-block; position: absolute; width: 28.847em; height: 0px; clip: rect(-1.28em, 1028.67em, 0.78em, -1000em); top: 0em; left: 50%; margin-left: -14.423em;"><span style="position: absolute; clip: rect(2.712em, 1028.67em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 28.847em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.712em, 1028.67em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-214"><span class="mrow" id="MathJax-Span-215"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1028.67em, 4.772em, -1000em); top: -3.992em; left: 50%; margin-left: -14.423em;"><span class="mrow" id="MathJax-Span-216"><span class="mi" id="MathJax-Span-217" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-218" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-220" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-221" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msub" id="MathJax-Span-222" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.455em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-223" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.849em;"><span class="mi" id="MathJax-Span-224" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.077em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-226" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-227" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-228" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-229" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msub" id="MathJax-Span-230" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.28em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-231" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.849em;"><span class="mi" id="MathJax-Span-232" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="munderover" id="MathJax-Span-233" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 2.279em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-234" style="font-family: MathJax_Size1; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.371em, 1000.44em, 4.13em, -1000em); top: -4.469em; left: 1.056em;"><span class="mi" id="MathJax-Span-235" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1001.22em, 4.138em, -1000em); top: -3.707em; left: 1.056em;"><span class="mrow" id="MathJax-Span-236"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.391em, 1001.12em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-237" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-238" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-239" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-240" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">e</span><span class="mo" id="MathJax-Span-241" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-242" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-243" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-244" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msub" id="MathJax-Span-245" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.509em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-246" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.849em;"><span class="mi" id="MathJax-Span-247" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">D</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-248" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">[</span></span><span class="mi" id="MathJax-Span-249" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-250" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-251" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-252" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-253" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-254" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">e</span><span class="mo" id="MathJax-Span-255" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-256" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-257" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-258" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-259" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-260" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">]</span></span><span class="mo" id="MathJax-Span-261" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-262" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">u</span><span class="mo" id="MathJax-Span-263" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mn" id="MathJax-Span-264" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-265" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-211"><span class="mrow" id="MathJax-Span-212"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-213" style="font-family: MathJax_Main;">(3)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.825em; border-left: 0px solid; width: 0px; height: 2.244em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>u</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>=</mo><msub><mi>K</mi><mi>P</mi></msub><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>I</mi></msub><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mi>e</mi><mo>(</mo><mi>i</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>D</mi></msub><mo>[</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>−</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>]</mo><mo>+</mo><mi>u</mi><mo>(</mo><mn>0</mn><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      u(k)=K_Pe(k)+K_I\sum_{i=0}^k e(i)+K_D[e(k)-e(k-1)]+u(0) \tag{3}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-13"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>u</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>=</mo><msub><mi>K</mi><mi>P</mi></msub><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>I</mi></msub><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mi>e</mi><mo>(</mo><mi>i</mi><mo>)</mo><mo>+</mo><msub><mi>K</mi><mi>D</mi></msub><mo>[</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>−</mo><mi>e</mi><mo>(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>]</mo><mo>+</mo><mi>u</mi><mo>(</mo><mn>0</mn><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">u(k)=K_Pe(k)+K_I\sum_{i=0}^k e(i)+K_D[e(k)-e(k-1)]+u(0) \tag{3}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">e</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.11378em; vertical-align: -1.27767em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.07847em;">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.83611em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">e</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathit">e</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">e</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 3.11378em; vertical-align: -1.27767em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)"><span class="token comment">// 微分项</span>
diff <span class="token operator">=</span> <span class="token punctuation">(</span>error <span class="token operator">-</span> previous_error_<span class="token punctuation">)</span> <span class="token operator">/</span> dt<span class="token punctuation">;</span>
<span class="token comment">// 积分项</span>
integral_ <span class="token operator">+</span><span class="token operator">=</span> error <span class="token operator">*</span> dt <span class="token operator">*</span> ki_<span class="token punctuation">;</span>
<span class="token comment">// PID控制器输出</span>
output <span class="token operator">=</span> error <span class="token operator">*</span> kp_ <span class="token operator">+</span> integral_ <span class="token operator">+</span> diff <span class="token operator">*</span> kd_<span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre>
<p>在实际调参过程中先调节P参数，再调节D参数，可能会更快达到想要的效果。感谢Apollo开发者群里<a href="https://www.baidu.com/s?wd=%E5%93%88%E5%B7%A5%E5%A4%A7&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank">哈工大</a>的海洋同学在PID调参过程中给我的指点。</p>
<h1><a name="t3"></a><a id="_142" target="_blank"></a>横向控制</h1>
<p>横向控制主要控制航向，通过改变方向盘扭矩或角度的大小等，使车辆按照想要的航向行驶。Apollo中的横向控制主要由前馈开环控制器和反馈闭环控制器构成。</p>
<div align="center"><img src="https://img-blog.csdn.net/20180919170956600?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></div>
<center>图5 横向控制</center>
<h2><a name="t4"></a><a id="_148" target="_blank"></a>前馈控制</h2>
<p>在之前的<a href="https://blog.csdn.net/u013914471/article/details/83018664" rel="nofollow" target="_blank">博文</a>中提到，车辆的系统的一般状态方程为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent=&quot;true&quot;><mi>x</mi><mo>&amp;#x2D9;</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \dot{x}=Ax+Bu\tag{4}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-266" style="width: 100%; display: inline-block; min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-267"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-268"><span class="mtable" id="MathJax-Span-269" style="min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="display: inline-block; position: absolute; width: 5.781em; height: 0px; clip: rect(-0.905em, 1005.76em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -2.891em;"><span style="position: absolute; clip: rect(3.171em, 1005.76em, 4.229em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.781em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-273"><span class="mrow" id="MathJax-Span-274"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.992em; left: 50%; margin-left: -2.891em;"><span class="mrow" id="MathJax-Span-275"><span class="mover" id="MathJax-Span-276"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-277" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.064em;"><span class="mo" id="MathJax-Span-278" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-279" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-280" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-281" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-282" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-283" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Math; font-style: italic;">u</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-270"><span class="mrow" id="MathJax-Span-271"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-272" style="font-family: MathJax_Main;">(4)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \dot{x}=Ax+Bu\tag{4}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-14"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\dot{x}=Ax+Bu\tag{4}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66786em; vertical-align: 0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.11111em;">˙</span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit">u</span></span><span class="tag"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>u</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      u</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-285" style="width: 0.696em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-286"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-287"><span class="mrow" id="MathJax-Span-288"><span class="mi" id="MathJax-Span-289" style="font-family: MathJax_Math; font-style: italic;">u</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.642em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">      u</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-15"><math><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">u</span></span></span></span></span>为前轮转角<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>&amp;#x3B4;</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      \delta</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-290" style="width: 0.523em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.451em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-291"><span style="display: inline-block; position: relative; width: 0.451em; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-292"><span class="mrow" id="MathJax-Span-293"><span class="mi" id="MathJax-Span-294" style="font-family: MathJax_Math; font-style: italic;">δ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.064em; border-left: 0px solid; width: 0px; height: 0.968em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">      \delta</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-16"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.03785em;">δ</span></span></span></span></span>，但由于道路曲率<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mover accent=&quot;true&quot;><mi>&amp;#x3C6;</mi><mo>&amp;#x2D9;</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      \dot{\varphi}_{des}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-295" style="width: 2.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.766em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.191em, 1001.77em, 4.383em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-296"><span style="display: inline-block; position: relative; width: 1.766em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1001.77em, 4.383em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-297"><span class="mrow" id="MathJax-Span-298"><span class="msub" id="MathJax-Span-299"><span style="display: inline-block; position: relative; width: 1.766em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.62em, 4.34em, -1000em); top: -3.992em; left: 0em;"><span class="mover" id="MathJax-Span-300"><span style="display: inline-block; position: relative; width: 0.66em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.62em, 4.34em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-301" style="font-family: MathJax_Math; font-style: italic;">φ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.16em;"><span class="mo" id="MathJax-Span-302" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.739em; left: 0.66em;"><span class="mrow" id="MathJax-Span-303"><span class="mi" id="MathJax-Span-304" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-305" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-306" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.362em; border-left: 0px solid; width: 0px; height: 1.212em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>φ</mi><mo>˙</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      \dot{\varphi}_{des}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-17"><math><semantics><mrow><msub><mover accent="true"><mi>φ</mi><mo>˙</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\dot{\varphi}_{des}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8623em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">φ</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.05555em;">˙</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的存在，公式4应写为<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mover accent=&quot;true&quot;><mi>x</mi><mo>&amp;#x2D9;</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>&amp;#x3B4;</mi><mo>+</mo><msub><mi>B</mi><mn>2</mn></msub><msub><mover accent=&quot;true&quot;><mi>&amp;#x3C6;</mi><mo>&amp;#x2D9;</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \dot{x}=Ax+B\delta+B_2\dot{\varphi}_{des} \tag{5}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-307" style="width: 100%; display: inline-block; min-width: 13.992em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 13.992em;"><span style="position: absolute; clip: rect(3.081em, 1009.84em, 4.403em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-308"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 13.992em;"><span style="position: absolute; clip: rect(3.081em, 1009.84em, 4.403em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-309"><span class="mtable" id="MathJax-Span-310" style="min-width: 13.992em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 13.992em;"><span style="display: inline-block; position: absolute; width: 9.836em; height: 0px; clip: rect(-0.911em, 1009.84em, 0.411em, -1000em); top: 0em; left: 50%; margin-left: -4.918em;"><span style="position: absolute; clip: rect(3.164em, 1009.84em, 4.403em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 9.836em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.145em, 1009.84em, 4.383em, -1000em); top: -3.973em; left: 0em;"><span class="mtd" id="MathJax-Span-314"><span class="mrow" id="MathJax-Span-315"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1009.84em, 4.383em, -1000em); top: -3.992em; left: 50%; margin-left: -4.918em;"><span class="mrow" id="MathJax-Span-316"><span class="mover" id="MathJax-Span-317"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-318" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.064em;"><span class="mo" id="MathJax-Span-319" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-320" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-321" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-322" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-323" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-324" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Math; font-style: italic;">δ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span><span class="mo" id="MathJax-Span-326" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msub" id="MathJax-Span-327" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.188em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-328" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.759em;"><span class="mn" id="MathJax-Span-329" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-330"><span style="display: inline-block; position: relative; width: 1.766em; height: 0px;"><span style="position: absolute; clip: rect(3.191em, 1000.62em, 4.34em, -1000em); top: -3.992em; left: 0em;"><span class="mover" id="MathJax-Span-331"><span style="display: inline-block; position: relative; width: 0.66em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.62em, 4.34em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-332" style="font-family: MathJax_Math; font-style: italic;">φ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.16em;"><span class="mo" id="MathJax-Span-333" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.739em; left: 0.66em;"><span class="mrow" id="MathJax-Span-334"><span class="mi" id="MathJax-Span-335" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-336" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-337" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.861em, 1001.18em, 0.4em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.973em; left: 0em;"><span class="mtd" id="MathJax-Span-311"><span class="mrow" id="MathJax-Span-312"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-313" style="font-family: MathJax_Main;">(5)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.386em; border-left: 0px solid; width: 0px; height: 1.366em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>δ</mi><mo>+</mo><msub><mi>B</mi><mn>2</mn></msub><msub><mover accent="true"><mi>φ</mi><mo>˙</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \dot{x}=Ax+B\delta+B_2\dot{\varphi}_{des} \tag{5}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-18"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>δ</mi><mo>+</mo><msub><mi>B</mi><mn>2</mn></msub><msub><mover accent="true"><mi>φ</mi><mo>˙</mo></mover><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\dot{x}=Ax+B\delta+B_2\dot{\varphi}_{des} \tag{5}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66786em; vertical-align: 0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.11111em;">˙</span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit" style="margin-right: 0.03785em;">δ</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05017em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">φ</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.05555em;">˙</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>当车辆在曲线道路上行驶时，并不能完全消除跟踪误差，因此引入和道路曲率相关的前馈控制器以帮助消除跟踪误差，由代码可以看出：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)"><span class="token keyword">const</span> <span class="token keyword">double</span> steer_angle_feedforward <span class="token operator">=</span> <span class="token function">ComputeFeedForward</span><span class="token punctuation">(</span>debug<span class="token operator">-&gt;</span><span class="token function">curvature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre>
<p>输入量只有一个曲率，计算的依据：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(6)</mtext></mtd><mtd><mrow><msub><mi>&amp;#x3B4;</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><mi>R</mi></mfrac><mo>+</mo><msub><mi>K</mi><mi>V</mi></msub><msub><mi>a</mi><mi>y</mi></msub><mo>&amp;#x2212;</mo><msub><mi>k</mi><mn>3</mn></msub><mo>[</mo><mfrac><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>r</mi></msub><mi>R</mi></mfrac><mo>&amp;#x2212;</mo><mfrac><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi></msub><mrow><mn>2</mn><msub><mi>C</mi><mrow><mi>&amp;#x3B1;</mi><mi>r</mi></mrow></msub></mrow></mfrac><mfrac><mrow><mi>m</mi><msup><msub><mi>V</mi><mi>x</mi></msub><mn>2</mn></msup></mrow><mrow><mi>R</mi><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi></mrow></mfrac><mo>]</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \delta_{ff}=\frac{L}{R}+K_Va_y-k_3[\frac{\ell_r}{R}-\frac{\ell_f}{2C_{\alpha r}}\frac{m{V_x}^2}{R\ell}] \tag{6}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-338" style="width: 100%; display: inline-block; min-width: 20.452em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 20.452em;"><span style="position: absolute; clip: rect(2.712em, 1016.07em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-339"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 20.452em;"><span style="position: absolute; clip: rect(2.712em, 1016.07em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-340"><span class="mtable" id="MathJax-Span-341" style="min-width: 20.452em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 20.452em;"><span style="display: inline-block; position: absolute; width: 16.296em; height: 0px; clip: rect(-1.28em, 1016.07em, 0.78em, -1000em); top: 0em; left: 50%; margin-left: -8.148em;"><span style="position: absolute; clip: rect(2.712em, 1016.07em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 16.296em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.712em, 1016.07em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-345"><span class="mrow" id="MathJax-Span-346"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1016.07em, 4.772em, -1000em); top: -3.992em; left: 50%; margin-left: -8.148em;"><span class="mrow" id="MathJax-Span-347"><span class="msub" id="MathJax-Span-348"><span style="display: inline-block; position: relative; width: 1.297em; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-349" style="font-family: MathJax_Math; font-style: italic;">δ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.444em;"><span class="mrow" id="MathJax-Span-350"><span class="mi" id="MathJax-Span-351" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span class="mi" id="MathJax-Span-352" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-353" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mfrac" id="MathJax-Span-354" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.657em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.379em, 1000.46em, 4.122em, -1000em); top: -4.386em; left: 50%; margin-left: -0.241em;"><span class="mi" id="MathJax-Span-355" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">L</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.53em, 4.137em, -1000em); top: -3.618em; left: 50%; margin-left: -0.268em;"><span class="mi" id="MathJax-Span-356" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.66em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.657em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="mo" id="MathJax-Span-357" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msub" id="MathJax-Span-358" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.468em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.849em;"><span class="mi" id="MathJax-Span-360" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-361"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.421em, 1000.51em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-362" style="font-family: MathJax_Math; font-style: italic;">a</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.529em;"><span class="mi" id="MathJax-Span-363" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.004em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-364" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msub" id="MathJax-Span-365" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.95em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1000.5em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-366" style="font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.521em;"><span class="mn" id="MathJax-Span-367" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-368" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">[</span></span><span class="mfrac" id="MathJax-Span-369"><span style="display: inline-block; position: relative; width: 0.693em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1000.57em, 4.234em, -1000em); top: -4.495em; left: 50%; margin-left: -0.287em;"><span class="msub" id="MathJax-Span-370"><span style="display: inline-block; position: relative; width: 0.573em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-371" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.295em;"><span class="mi" id="MathJax-Span-372" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.53em, 4.137em, -1000em); top: -3.618em; left: 50%; margin-left: -0.268em;"><span class="mi" id="MathJax-Span-373" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.69em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.693em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="mo" id="MathJax-Span-374" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mfrac" id="MathJax-Span-375" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.578em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1000.62em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -0.311em;"><span class="msub" id="MathJax-Span-376"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-377" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.295em;"><span class="mi" id="MathJax-Span-378" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.363em, 1001.46em, 4.234em, -1000em); top: -3.602em; left: 50%; margin-left: -0.729em;"><span class="mrow" id="MathJax-Span-379"><span style="display: inline-block; position: relative; width: 1.458em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1001.46em, 4.234em, -1000em); top: -3.992em; left: 0em;"><span class="mn" id="MathJax-Span-380" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="msub" id="MathJax-Span-381"><span style="display: inline-block; position: relative; width: 1.104em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-382" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mrow" id="MathJax-Span-383"><span class="mi" id="MathJax-Span-384" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">α</span><span class="mi" id="MathJax-Span-385" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1001.58em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 1.578em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="mfrac" id="MathJax-Span-386"><span style="display: inline-block; position: relative; width: 1.795em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.239em, 1001.68em, 4.234em, -1000em); top: -4.495em; left: 50%; margin-left: -0.838em;"><span class="mrow" id="MathJax-Span-387"><span style="display: inline-block; position: relative; width: 1.675em; height: 0px;"><span style="position: absolute; clip: rect(3.239em, 1001.68em, 4.234em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-388" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span class="msup" id="MathJax-Span-389"><span style="display: inline-block; position: relative; width: 1.054em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1000.75em, 4.234em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-390"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-391" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.412em;"><span class="mi" id="MathJax-Span-392" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.282em; left: 0.751em;"><span class="mn" id="MathJax-Span-393" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.363em, 1000.82em, 4.137em, -1000em); top: -3.602em; left: 50%; margin-left: -0.416em;"><span class="mrow" id="MathJax-Span-394"><span style="display: inline-block; position: relative; width: 0.832em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.82em, 4.137em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-395" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-396" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1001.8em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 1.795em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="mo" id="MathJax-Span-397" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">]</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-342"><span class="mrow" id="MathJax-Span-343"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-344" style="font-family: MathJax_Main;">(6)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.825em; border-left: 0px solid; width: 0px; height: 2.244em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(6)</mtext></mtd><mtd><mrow><msub><mi>δ</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><mi>R</mi></mfrac><mo>+</mo><msub><mi>K</mi><mi>V</mi></msub><msub><mi>a</mi><mi>y</mi></msub><mo>−</mo><msub><mi>k</mi><mn>3</mn></msub><mo>[</mo><mfrac><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><mi>R</mi></mfrac><mo>−</mo><mfrac><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><mrow><mn>2</mn><msub><mi>C</mi><mrow><mi>α</mi><mi>r</mi></mrow></msub></mrow></mfrac><mfrac><mrow><mi>m</mi><msup><msub><mi>V</mi><mi>x</mi></msub><mn>2</mn></msup></mrow><mrow><mi>R</mi><mi mathvariant="normal">ℓ</mi></mrow></mfrac><mo>]</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \delta_{ff}=\frac{L}{R}+K_Va_y-k_3[\frac{\ell_r}{R}-\frac{\ell_f}{2C_{\alpha r}}\frac{m{V_x}^2}{R\ell}] \tag{6}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-19"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(6)</mtext></mtd><mtd><mrow><msub><mi>δ</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><mi>R</mi></mfrac><mo>+</mo><msub><mi>K</mi><mi>V</mi></msub><msub><mi>a</mi><mi>y</mi></msub><mo>−</mo><msub><mi>k</mi><mn>3</mn></msub><mo>[</mo><mfrac><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><mi>R</mi></mfrac><mo>−</mo><mfrac><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><mrow><mn>2</mn><msub><mi>C</mi><mrow><mi>α</mi><mi>r</mi></mrow></msub></mrow></mfrac><mfrac><mrow><mi>m</mi><msup><msub><mi>V</mi><mi>x</mi></msub><mn>2</mn></msup></mrow><mrow><mi>R</mi><mi mathvariant="normal">ℓ</mi></mrow></mfrac><mo>]</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\delta_{ff}=\frac{L}{R}+K_Va_y-k_3[\frac{\ell_r}{R}-\frac{\ell_f}{2C_{\alpha r}}\frac{m{V_x}^2}{R\ell}] \tag{6}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.04633em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.22222em;">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.40034em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.0037em;">α</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.56434em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord">ℓ</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">m</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.887338em;"><span class="" style="top: -3.13623em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span><span class="tag"><span class="strut" style="height: 2.40034em; vertical-align: -0.836em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>公式出处：<a href="https://download.csdn.net/download/u013914471/10739962" rel="nofollow" target="_blank">Vehicle Dynamics and Control</a> 第3章，该章节对方向盘控制做了详解。<br>
公式6中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>&amp;#x3B4;</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      \delta_{ff}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-398" style="width: 1.564em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.297em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.145em, 1001.3em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-399"><span style="display: inline-block; position: relative; width: 1.297em; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1001.3em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-400"><span class="mrow" id="MathJax-Span-401"><span class="msub" id="MathJax-Span-402"><span style="display: inline-block; position: relative; width: 1.297em; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-403" style="font-family: MathJax_Math; font-style: italic;">δ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.444em;"><span class="mrow" id="MathJax-Span-404"><span class="mi" id="MathJax-Span-405" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span class="mi" id="MathJax-Span-406" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.407em; border-left: 0px solid; width: 0px; height: 1.312em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>δ</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      \delta_{ff}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-20"><math><semantics><mrow><msub><mi>δ</mi><mrow><mi>f</mi><mi>f</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\delta_{ff}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为前轮转角，需要乘以传动比，然后转换为方向盘转动率。</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)"><span class="token keyword">const</span> <span class="token keyword">double</span> steer_angle_feedforwardterm <span class="token operator">=</span>
<span class="token punctuation">(</span>wheelbase_ <span class="token operator">*</span> ref_curvature <span class="token operator">+</span> kv <span class="token operator">*</span> v <span class="token operator">*</span> v <span class="token operator">*</span> ref_curvature <span class="token operator">-</span>
<span class="token function">matrix_k_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span>
<span class="token punctuation">(</span>lr_ <span class="token operator">*</span> ref_curvature <span class="token operator">-</span>
lf_ <span class="token operator">*</span> mass_ <span class="token operator">*</span> v <span class="token operator">*</span> v <span class="token operator">*</span> ref_curvature <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">/</span> cr_ <span class="token operator">/</span> wheelbase_<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
<span class="token number">180</span> <span class="token operator">/</span> M_PI <span class="token operator">*</span> steer_transmission_ratio_ <span class="token operator">/</span>
steer_single_direction_max_degree_ <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre>
<p>其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      ref\_curvature</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-407" style="width: 7.509em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.287em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.157em, 1006.25em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-408"><span style="display: inline-block; position: relative; width: 6.287em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1006.25em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-409"><span class="mrow" id="MathJax-Span-410"><span class="mi" id="MathJax-Span-411" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-412" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-413" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mi" id="MathJax-Span-414" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-415" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-416" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-417" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-418" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-419" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-420" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-421" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-422" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-423" style="font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.186em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">      ref\_curvature</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-21"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">ref\_curvature</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">c</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span></span></span></span></span> 为曲率，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>=</mo><mfrac><mn>1</mn><mi>R</mi></mfrac></mrow><annotation encoding=&quot;application/x-tex&quot;>      ref\_curvature = \frac{1}{R}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-424" style="width: 10.156em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.518em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(2.997em, 1008.52em, 4.511em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-425"><span style="display: inline-block; position: relative; width: 8.518em; height: 0px;"><span style="position: absolute; clip: rect(2.997em, 1008.52em, 4.511em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-426"><span class="mrow" id="MathJax-Span-427"><span class="mi" id="MathJax-Span-428" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-429" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-430" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mi" id="MathJax-Span-431" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-432" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-433" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-434" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-435" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-436" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-437" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-438" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-439" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-440" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-441" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mfrac" id="MathJax-Span-442" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.657em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.391em, 1000.3em, 4.122em, -1000em); top: -4.386em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-443" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.53em, 4.137em, -1000em); top: -3.618em; left: 50%; margin-left: -0.268em;"><span class="mi" id="MathJax-Span-444" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.66em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.657em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.515em; border-left: 0px solid; width: 0px; height: 1.595em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>=</mo><mfrac><mn>1</mn><mi>R</mi></mfrac></mrow><annotation encoding="application/x-tex">      ref\_curvature = \frac{1}{R}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-22"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>=</mo><mfrac><mn>1</mn><mi>R</mi></mfrac></mrow><annotation encoding="application/x-tex">ref\_curvature = \frac{1}{R}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">c</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.00773em;">R</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>k</mi><mn>3</mn></msub><mo>=</mo><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>k</mi><mi mathvariant=&quot;normal&quot;>_</mi><mo>(</mo><mn>0</mn><mo separator=&quot;true&quot;>,</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      k_3=matrix\_k\_(0, 2)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-445" style="width: 10.893em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.164em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1009.07em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-446"><span style="display: inline-block; position: relative; width: 9.164em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1009.07em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-447"><span class="mrow" id="MathJax-Span-448"><span class="msub" id="MathJax-Span-449"><span style="display: inline-block; position: relative; width: 0.95em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1000.5em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-450" style="font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.521em;"><span class="mn" id="MathJax-Span-451" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-452" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-453" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">m</span><span class="mi" id="MathJax-Span-454" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-455" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-456" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-457" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-458" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-460" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mi" id="MathJax-Span-461" style="font-family: MathJax_Main;">_</span><span class="mo" id="MathJax-Span-462" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-463" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-464" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-465" style="font-family: MathJax_Main; padding-left: 0.167em;">2</span><span class="mo" id="MathJax-Span-466" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mn>3</mn></msub><mo>=</mo><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi mathvariant="normal">_</mi><mo>(</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">      k_3=matrix\_k\_(0, 2)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-23"><math><semantics><mrow><msub><mi>k</mi><mn>3</mn></msub><mo>=</mo><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi mathvariant="normal">_</mi><mo>(</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">k_3=matrix\_k\_(0, 2)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.06em; vertical-align: -0.31em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">x</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>k</mi><mi mathvariant=&quot;normal&quot;>_</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      matrix\_k\_</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-467" style="width: 5.556em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.657em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1004.66em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-468"><span style="display: inline-block; position: relative; width: 4.657em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1004.66em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-469"><span class="mrow" id="MathJax-Span-470"><span class="mi" id="MathJax-Span-471" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-472" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-473" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-474" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-475" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-476" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-477" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-478" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mi" id="MathJax-Span-479" style="font-family: MathJax_Main;">_</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi mathvariant="normal">_</mi></mrow><annotation encoding="application/x-tex">      matrix\_k\_</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-24"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>k</mi><mi mathvariant="normal">_</mi></mrow><annotation encoding="application/x-tex">matrix\_k\_</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">x</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mord" style="margin-right: 0.02778em;">_</span></span></span></span></span>为增益矩阵，由LQR求得。</p>
<h2><a name="t5"></a><a id="_176" target="_blank"></a>反馈控制</h2>
<p>由于前馈控制用于消除有道路曲率引起的误差，因此对于反馈控制，车辆的状态方程仍可以用公式4表示：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-25-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent=&quot;true&quot;><mi>x</mi><mo>&amp;#x2D9;</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \dot{x}=Ax+Bu\tag{4}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-480" style="width: 100%; display: inline-block; min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-481"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-482"><span class="mtable" id="MathJax-Span-483" style="min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="display: inline-block; position: absolute; width: 5.781em; height: 0px; clip: rect(-0.905em, 1005.76em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -2.891em;"><span style="position: absolute; clip: rect(3.171em, 1005.76em, 4.229em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.781em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-487"><span class="mrow" id="MathJax-Span-488"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.992em; left: 50%; margin-left: -2.891em;"><span class="mrow" id="MathJax-Span-489"><span class="mover" id="MathJax-Span-490"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-491" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.064em;"><span class="mo" id="MathJax-Span-492" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-493" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-495" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-496" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-497" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-498" style="font-family: MathJax_Math; font-style: italic;">u</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-484"><span class="mrow" id="MathJax-Span-485"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-486" style="font-family: MathJax_Main;">(4)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \dot{x}=Ax+Bu\tag{4}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-25"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\dot{x}=Ax+Bu\tag{4}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66786em; vertical-align: 0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.11111em;">˙</span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit">u</span></span><span class="tag"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>为了达到性能上的需求，并使控制系统构成全状态反馈系统，需要设计一个<a href="https://www.baidu.com/s?wd=%E5%8F%8D%E9%A6%88%E6%8E%A7%E5%88%B6%E5%99%A8&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank">反馈控制器</a><span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>u</mi><mo>=</mo><mo>&amp;#x2212;</mo><mi>K</mi><mi>x</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      u=-Kx</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-499" style="width: 4.992em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.145em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1004.1em, 4.204em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-500"><span style="display: inline-block; position: relative; width: 4.145em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1004.1em, 4.204em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-501"><span class="mrow" id="MathJax-Span-502"><span class="mi" id="MathJax-Span-503" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-504" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-505" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mi" id="MathJax-Span-506" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mi" id="MathJax-Span-507" style="font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.149em; border-left: 0px solid; width: 0px; height: 1.014em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mo>−</mo><mi>K</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">      u=-Kx</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-26"><math><semantics><mrow><mi>u</mi><mo>=</mo><mo>−</mo><mi>K</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">u=-Kx</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">u</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord">−</span><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="mord mathit">x</span></span></span></span></span>。基于车辆系统的状态方程，并结合代码进行分析，仍先不考虑预估，即<code>preview_window_=0</code>。<br>
首先，控制系统的状态变量有四个：</p>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 横向误差 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      lateral\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-508" style="width: 6.815em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-509"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-510"><span class="mrow" id="MathJax-Span-511"><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-513" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-514" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-515" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-516" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-517" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-518" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-519" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-520" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-521" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-522" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-523" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-524" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      lateral\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-27"><math><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">lateral\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 横向误差率 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      lateral\_error\_rate</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-525" style="width: 9.548em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.043em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1008.01em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-526"><span style="display: inline-block; position: relative; width: 8.043em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1008.01em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-527"><span class="mrow" id="MathJax-Span-528"><span class="mi" id="MathJax-Span-529" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-530" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-531" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-533" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-534" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-535" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-536" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-538" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-539" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-540" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-541" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-542" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-543" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-544" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-546" style="font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">      lateral\_error\_rate</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-28"><math><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">lateral\_error\_rate</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span></span></span></span></span></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 航向误差 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      heading\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-547" style="width: 7.552em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.323em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1006.3em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-548"><span style="display: inline-block; position: relative; width: 6.323em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1006.3em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-549"><span class="mrow" id="MathJax-Span-550"><span class="mi" id="MathJax-Span-551" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-552" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-554" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-555" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-556" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-557" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-558" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-559" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-560" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-561" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-562" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-563" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      heading\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-29"><math><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">heading\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">a</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="true" disabled=""> 航向误差率 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      heading\_error\_rate</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-564" style="width: 10.286em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.63em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1008.59em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-565"><span style="display: inline-block; position: relative; width: 8.63em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1008.59em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-566"><span class="mrow" id="MathJax-Span-567"><span class="mi" id="MathJax-Span-568" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-569" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-570" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-571" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-572" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-573" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-574" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-575" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-576" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-577" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-578" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-579" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-580" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-581" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-582" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-583" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-584" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-585" style="font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">      heading\_error\_rate</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-30"><math><semantics><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">_</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">heading\_error\_rate</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">a</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span></span></span></span></span></li>
</ul>
<p>横向误差的计算参见上篇博文：<a href="https://blog.csdn.net/u013914471/article/details/83018664" rel="nofollow" target="_blank">Apollo代码学习(三)—车辆动力学模型</a>。<br>
代码中，matrix_state_为状态变量：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  matrix_state_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>matrix_size<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">matrix_state_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> debug<span class="token operator">-&gt;</span><span class="token function">lateral_error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_state_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> debug<span class="token operator">-&gt;</span><span class="token function">lateral_error_rate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_state_</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> debug<span class="token operator">-&gt;</span><span class="token function">heading_error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_state_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> debug<span class="token operator">-&gt;</span><span class="token function">heading_error_rate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre>
<p>对应的状态矩阵A，即代码中的<code>matrix_a_</code></p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  matrix_a_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>basic_state_size_<span class="token punctuation">,</span> basic_state_size_<span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_ad_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>basic_state_size_<span class="token punctuation">,</span> basic_state_size_<span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_adc_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>matrix_size<span class="token punctuation">,</span> matrix_size<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cf_ <span class="token operator">+</span> cr_<span class="token punctuation">)</span> <span class="token operator">/</span> mass_<span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>lf_ <span class="token operator">*</span> cf_ <span class="token operator">-</span> lr_ <span class="token operator">*</span> cr_<span class="token punctuation">)</span> <span class="token operator">/</span> iz_<span class="token punctuation">;</span>

matrix_a_coeff_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>matrix_size<span class="token punctuation">,</span> matrix_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>cf_ <span class="token operator">+</span> cr_<span class="token punctuation">)</span> <span class="token operator">/</span> mass_<span class="token punctuation">;</span>
<span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>lr_ <span class="token operator">*</span> cr_ <span class="token operator">-</span> lf_ <span class="token operator">*</span> cf_<span class="token punctuation">)</span> <span class="token operator">/</span> mass_<span class="token punctuation">;</span>
<span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>lr_ <span class="token operator">*</span> cr_ <span class="token operator">-</span> lf_ <span class="token operator">*</span> cf_<span class="token punctuation">)</span> <span class="token operator">/</span> iz_<span class="token punctuation">;</span>
<span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span> <span class="token operator">*</span> <span class="token punctuation">(</span>lf_ <span class="token operator">*</span> lf_ <span class="token operator">*</span> cf_ <span class="token operator">+</span> lr_ <span class="token operator">*</span> lr_ <span class="token operator">*</span> cr_<span class="token punctuation">)</span> <span class="token operator">/</span> iz_<span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li></ul></pre>
<p><code>matrix_a_coeff_</code>用于更新状态矩阵<code>matrix_a_</code></p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)"><span class="token keyword">void</span> LatController<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">UpdateMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> v <span class="token operator">=</span>
std<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">max</span><span class="token punctuation">(</span>VehicleStateProvider<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">linear_velocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> v<span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">/</span> v<span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> v<span class="token punctuation">;</span>
<span class="token function">matrix_a_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">matrix_a_coeff_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">/</span> v<span class="token punctuation">;</span>
Matrix matrix_i <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Identity</span><span class="token punctuation">(</span>matrix_a_<span class="token punctuation">.</span><span class="token function">cols</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix_a_<span class="token punctuation">.</span><span class="token function">cols</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_ad_ <span class="token operator">=</span> <span class="token punctuation">(</span>matrix_i <span class="token operator">+</span> ts_ <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">*</span> matrix_a_<span class="token punctuation">)</span> <span class="token operator">*</span>
   <span class="token punctuation">(</span>matrix_i <span class="token operator">-</span> ts_ <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">*</span> matrix_a_<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

matrix_adc_<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> basic_state_size_<span class="token punctuation">,</span> basic_state_size_<span class="token punctuation">)</span> <span class="token operator">=</span> matrix_ad_<span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre>
<p>则状态矩阵<code>matrix_a_</code>为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-31-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(7)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>a</mi><mi mathvariant=&quot;normal&quot;>_</mi><mo>=</mo><mrow><mo fence=&quot;true&quot;>[</mo><mtable><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mrow><mo>&amp;#x2212;</mo><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mi>m</mi></mfrac></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>&amp;#x2212;</mo><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>&amp;#x2212;</mo><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><msub><mi>I</mi><mi>z</mi></msub><mi>V</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub><mo>&amp;#x2212;</mo><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msubsup><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>r</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>r</mi></msub><mo>&amp;#x2212;</mo><msubsup><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>I</mi><mi>z</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr></mtable><mo fence=&quot;true&quot;>]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>       matrix\_a\_ =\begin{bmatrix}0 &amp;amp; 1 &amp;amp; 0 &amp;amp; 0 \\0 &amp;amp; -\frac{C_f+C_r}{mV} &amp;amp; \frac{C_f+C_r}{m} &amp;amp; \frac{\ell_rC_r-\ell_fC_f}{mV} \\0 &amp;amp; 0 &amp;amp; 0 &amp;amp; 1 \\0 &amp;amp; \frac{\ell_rC_r-\ell_fC_f}{I_zV} &amp;amp; \frac{\ell_fC_f-\ell_rC_r}{I_z} &amp;amp; \frac{\ell_r^2C_r-\ell_f^2C_f}{IzV}\end{bmatrix}\tag{7}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-586" style="width: 100%; display: inline-block; min-width: 25.92em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 25.92em;"><span style="position: absolute; clip: rect(3.925em, 1021.44em, 10.761em, -1000em); top: -7.593em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-587"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 25.92em;"><span style="position: absolute; clip: rect(3.925em, 1021.44em, 10.761em, -1000em); top: -7.593em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-588"><span class="mtable" id="MathJax-Span-589" style="min-width: 25.92em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 25.92em;"><span style="display: inline-block; position: absolute; width: 21.764em; height: 0px; clip: rect(-3.668em, 1021.44em, 3.168em, -1000em); top: 0em; left: 50%; margin-left: -10.882em;"><span style="position: absolute; clip: rect(3.925em, 1021.44em, 10.761em, -1000em); top: -7.593em; left: 0em;"><span style="display: inline-block; position: relative; width: 21.764em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.925em, 1021.44em, 10.761em, -1000em); top: -7.593em; left: 0em;"><span class="mtd" id="MathJax-Span-593"><span class="mrow" id="MathJax-Span-594"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.925em, 1021.44em, 10.761em, -1000em); top: -7.593em; left: 50%; margin-left: -10.882em;"><span class="mrow" id="MathJax-Span-595"><span class="mi" id="MathJax-Span-596" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-597" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-598" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-599" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-600" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-601" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-602" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-603" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-604" style="font-family: MathJax_Main;">_</span><span class="mo" id="MathJax-Span-605" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-606" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-607" style="vertical-align: 3.538em;"><span style="display: inline-block; position: relative; width: 0.667em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.838em; left: 0em;">⎡<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.94em; left: 0em;">⎣<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.682em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.17em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.659em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.147em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.364em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.875em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mtable" id="MathJax-Span-608" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 14.097em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.46em, 9.69em, -1000em); top: -6.986em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.5em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -6.73em; left: 0em;"><span class="mtd" id="MathJax-Span-609"><span class="mrow" id="MathJax-Span-610"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-611"><span class="mrow" id="MathJax-Span-612"><span class="mn" id="MathJax-Span-613" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -4.998em; left: 0em;"><span class="mtd" id="MathJax-Span-629"><span class="mrow" id="MathJax-Span-630"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-631"><span class="mrow" id="MathJax-Span-632"><span class="mn" id="MathJax-Span-633" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.378em; left: 0em;"><span class="mtd" id="MathJax-Span-688"><span class="mrow" id="MathJax-Span-689"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-690"><span class="mrow" id="MathJax-Span-691"><span class="mn" id="MathJax-Span-692" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -1.44em; left: 0em;"><span class="mtd" id="MathJax-Span-708"><span class="mrow" id="MathJax-Span-709"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-710"><span class="mrow" id="MathJax-Span-711"><span class="mn" id="MathJax-Span-712" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.986em;"></span></span><span style="position: absolute; clip: rect(3.929em, 1003.72em, 10.631em, -1000em); top: -7.463em; left: 1.3em;"><span style="display: inline-block; position: relative; width: 3.724em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.43em, 4.122em, -1000em); top: -6.73em; left: 0em;"><span class="mtd" id="MathJax-Span-614"><span class="mrow" id="MathJax-Span-615"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.43em, 4.122em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-616"><span class="mrow" id="MathJax-Span-617"><span class="mn" id="MathJax-Span-618" style="font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1003.31em, 4.512em, -1000em); top: -4.998em; left: 0em;"><span class="mtd" id="MathJax-Span-634"><span class="mrow" id="MathJax-Span-635"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1003.31em, 4.512em, -1000em); top: -3.992em; left: 50%; margin-left: -1.653em;"><span class="mstyle" id="MathJax-Span-636"><span class="mrow" id="MathJax-Span-637"><span class="mrow" id="MathJax-Span-638"><span class="mo" id="MathJax-Span-639" style="font-family: MathJax_Main;">−</span><span class="mfrac" id="MathJax-Span-640"><span style="display: inline-block; position: relative; width: 2.288em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1002.17em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -1.084em;"><span class="mrow" id="MathJax-Span-641"><span style="display: inline-block; position: relative; width: 2.168em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1002.17em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-642"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-643" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-644" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-645" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="msub" id="MathJax-Span-646"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-647" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-648" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1001.17em, 4.138em, -1000em); top: -3.618em; left: 50%; margin-left: -0.582em;"><span class="mrow" id="MathJax-Span-649"><span style="display: inline-block; position: relative; width: 1.165em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1001.17em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-650" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-651" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1002.29em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 2.288em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.378em; left: 0em;"><span class="mtd" id="MathJax-Span-693"><span class="mrow" id="MathJax-Span-694"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-695"><span class="mrow" id="MathJax-Span-696"><span class="mn" id="MathJax-Span-697" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1003.72em, 4.608em, -1000em); top: -1.44em; left: 0em;"><span class="mtd" id="MathJax-Span-713"><span class="mrow" id="MathJax-Span-714"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1003.72em, 4.608em, -1000em); top: -3.992em; left: 50%; margin-left: -1.862em;"><span class="mstyle" id="MathJax-Span-715"><span class="mrow" id="MathJax-Span-716"><span class="mfrac" id="MathJax-Span-717"><span style="display: inline-block; position: relative; width: 3.484em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -1.682em;"><span class="mrow" id="MathJax-Span-718"><span style="display: inline-block; position: relative; width: 3.364em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-719"><span style="display: inline-block; position: relative; width: 0.573em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-720" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.295em;"><span class="mi" id="MathJax-Span-721" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-722"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-723" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-724" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-725" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="msub" id="MathJax-Span-726"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-727" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.295em;"><span class="mi" id="MathJax-Span-728" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-729"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-730" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-731" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1001.14em, 4.234em, -1000em); top: -3.618em; left: 50%; margin-left: -0.571em;"><span class="mrow" id="MathJax-Span-732"><span style="display: inline-block; position: relative; width: 1.142em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1001.14em, 4.234em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-733"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1000.36em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-734" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.311em;"><span class="mi" id="MathJax-Span-735" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-736" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1003.48em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 3.484em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.463em;"></span></span><span style="position: absolute; clip: rect(3.929em, 1003.72em, 10.631em, -1000em); top: -7.463em; left: 5.824em;"><span style="display: inline-block; position: relative; width: 3.724em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -6.73em; left: 0em;"><span class="mtd" id="MathJax-Span-619"><span class="mrow" id="MathJax-Span-620"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-621"><span class="mrow" id="MathJax-Span-622"><span class="mn" id="MathJax-Span-623" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1002.53em, 4.475em, -1000em); top: -4.998em; left: 0em;"><span class="mtd" id="MathJax-Span-652"><span class="mrow" id="MathJax-Span-653"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1002.53em, 4.475em, -1000em); top: -3.992em; left: 50%; margin-left: -1.264em;"><span class="mstyle" id="MathJax-Span-654"><span class="mrow" id="MathJax-Span-655"><span class="mfrac" id="MathJax-Span-656"><span style="display: inline-block; position: relative; width: 2.288em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1002.17em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -1.084em;"><span class="mrow" id="MathJax-Span-657"><span style="display: inline-block; position: relative; width: 2.168em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1002.17em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-658"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-659" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-660" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-661" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="msub" id="MathJax-Span-662"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-663" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-664" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.549em, 1000.61em, 4.13em, -1000em); top: -3.647em; left: 50%; margin-left: -0.31em;"><span class="mi" id="MathJax-Span-665" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1002.29em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 2.288em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.378em; left: 0em;"><span class="mtd" id="MathJax-Span-698"><span class="mrow" id="MathJax-Span-699"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-700"><span class="mrow" id="MathJax-Span-701"><span class="mn" id="MathJax-Span-702" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1003.72em, 4.608em, -1000em); top: -1.44em; left: 0em;"><span class="mtd" id="MathJax-Span-737"><span class="mrow" id="MathJax-Span-738"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1003.72em, 4.608em, -1000em); top: -3.992em; left: 50%; margin-left: -1.862em;"><span class="mstyle" id="MathJax-Span-739"><span class="mrow" id="MathJax-Span-740"><span class="mfrac" id="MathJax-Span-741"><span style="display: inline-block; position: relative; width: 3.484em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -1.682em;"><span class="mrow" id="MathJax-Span-742"><span style="display: inline-block; position: relative; width: 3.364em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-743"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-744" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.295em;"><span class="mi" id="MathJax-Span-745" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-746"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-747" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-748" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-749" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="msub" id="MathJax-Span-750"><span style="display: inline-block; position: relative; width: 0.573em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-751" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.295em;"><span class="mi" id="MathJax-Span-752" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-753"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-754" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-755" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.6em, 4.234em, -1000em); top: -3.618em; left: 50%; margin-left: -0.299em;"><span class="msub" id="MathJax-Span-756"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1000.36em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-757" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.311em;"><span class="mi" id="MathJax-Span-758" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1003.48em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 3.484em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.463em;"></span></span><span style="position: absolute; clip: rect(3.799em, 1003.75em, 10.405em, -1000em); top: -7.333em; left: 10.348em;"><span style="display: inline-block; position: relative; width: 3.749em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -6.73em; left: 0em;"><span class="mtd" id="MathJax-Span-624"><span class="mrow" id="MathJax-Span-625"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-626"><span class="mrow" id="MathJax-Span-627"><span class="mn" id="MathJax-Span-628" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1003.72em, 4.512em, -1000em); top: -4.998em; left: 0em;"><span class="mtd" id="MathJax-Span-666"><span class="mrow" id="MathJax-Span-667"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1003.72em, 4.512em, -1000em); top: -3.992em; left: 50%; margin-left: -1.862em;"><span class="mstyle" id="MathJax-Span-668"><span class="mrow" id="MathJax-Span-669"><span class="mfrac" id="MathJax-Span-670"><span style="display: inline-block; position: relative; width: 3.484em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -1.682em;"><span class="mrow" id="MathJax-Span-671"><span style="display: inline-block; position: relative; width: 3.364em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1003.36em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-672"><span style="display: inline-block; position: relative; width: 0.573em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-673" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.295em;"><span class="mi" id="MathJax-Span-674" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-675"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-676" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-677" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-678" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="msub" id="MathJax-Span-679"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-680" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.295em;"><span class="mi" id="MathJax-Span-681" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-682"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-683" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-684" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1001.17em, 4.138em, -1000em); top: -3.618em; left: 50%; margin-left: -0.582em;"><span class="mrow" id="MathJax-Span-685"><span style="display: inline-block; position: relative; width: 1.165em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1001.17em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-686" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-687" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1003.48em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 3.484em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.43em, 4.122em, -1000em); top: -3.378em; left: 0em;"><span class="mtd" id="MathJax-Span-703"><span class="mrow" id="MathJax-Span-704"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.43em, 4.122em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-705"><span class="mrow" id="MathJax-Span-706"><span class="mn" id="MathJax-Span-707" style="font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.555em, 1003.75em, 4.512em, -1000em); top: -1.44em; left: 0em;"><span class="mtd" id="MathJax-Span-759"><span class="mrow" id="MathJax-Span-760"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.555em, 1003.75em, 4.512em, -1000em); top: -3.992em; left: 50%; margin-left: -1.874em;"><span class="mstyle" id="MathJax-Span-761"><span class="mrow" id="MathJax-Span-762"><span class="mfrac" id="MathJax-Span-763"><span style="display: inline-block; position: relative; width: 3.509em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.223em, 1003.39em, 4.399em, -1000em); top: -4.661em; left: 50%; margin-left: -1.694em;"><span class="mrow" id="MathJax-Span-764"><span style="display: inline-block; position: relative; width: 3.389em; height: 0px;"><span style="position: absolute; clip: rect(3.223em, 1003.39em, 4.399em, -1000em); top: -3.992em; left: 0em;"><span class="msubsup" id="MathJax-Span-765"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-766" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.529em, 1000.3em, 4.122em, -1000em); top: -4.297em; left: 0.295em;"><span class="mn" id="MathJax-Span-767" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.641em, 1000.28em, 4.128em, -1000em); top: -3.817em; left: 0.295em;"><span class="mi" id="MathJax-Span-768" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-769"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-770" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.506em;"><span class="mi" id="MathJax-Span-771" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-772" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="msubsup" id="MathJax-Span-773"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-774" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.529em, 1000.3em, 4.122em, -1000em); top: -4.297em; left: 0.295em;"><span class="mn" id="MathJax-Span-775" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.509em, 1000.33em, 4.225em, -1000em); top: -3.817em; left: 0.295em;"><span class="mi" id="MathJax-Span-776" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-777"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-778" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-779" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1001.23em, 4.138em, -1000em); top: -3.618em; left: 50%; margin-left: -0.616em;"><span class="mrow" id="MathJax-Span-780"><span style="display: inline-block; position: relative; width: 1.231em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1001.23em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-781" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-782" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-783" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.132em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1003.51em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 3.509em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.333em;"></span></span></span></span><span class="mo" id="MathJax-Span-784" style="vertical-align: 3.538em;"><span style="display: inline-block; position: relative; width: 0.667em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.838em; left: 0em;">⎤<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.94em; left: 0em;">⎦<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.682em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.17em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.659em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.147em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.364em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.875em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.593em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.593em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.593em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-590"><span class="mrow" id="MathJax-Span-591"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-592" style="font-family: MathJax_Main;">(7)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.593em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.593em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.667em; border-left: 0px solid; width: 0px; height: 7.929em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(7)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>a</mi><mi mathvariant="normal">_</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mi>m</mi></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><msub><mi>I</mi><mi>z</mi></msub><mi>V</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msubsup><mi mathvariant="normal">ℓ</mi><mi>r</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msubsup><mi mathvariant="normal">ℓ</mi><mi>f</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>I</mi><mi>z</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">       matrix\_a\_ =\begin{bmatrix}0 &amp; 1 &amp; 0 &amp; 0 \\0 &amp; -\frac{C_f+C_r}{mV} &amp; \frac{C_f+C_r}{m} &amp; \frac{\ell_rC_r-\ell_fC_f}{mV} \\0 &amp; 0 &amp; 0 &amp; 1 \\0 &amp; \frac{\ell_rC_r-\ell_fC_f}{I_zV} &amp; \frac{\ell_fC_f-\ell_rC_r}{I_z} &amp; \frac{\ell_r^2C_r-\ell_f^2C_f}{IzV}\end{bmatrix}\tag{7}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-31"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(7)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>a</mi><mi mathvariant="normal">_</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi>C</mi><mi>f</mi></msub><mo>+</mo><msub><mi>C</mi><mi>r</mi></msub></mrow><mi>m</mi></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>m</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><msub><mi>I</mi><mi>z</mi></msub><mi>V</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub><mo>−</mo><msub><mi mathvariant="normal">ℓ</mi><mi>r</mi></msub><msub><mi>C</mi><mi>r</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msubsup><mi mathvariant="normal">ℓ</mi><mi>r</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>r</mi></msub><mo>−</mo><msubsup><mi mathvariant="normal">ℓ</mi><mi>f</mi><mn>2</mn></msubsup><msub><mi>C</mi><mi>f</mi></msub></mrow><mrow><mi>I</mi><mi>z</mi><mi>V</mi></mrow></mfrac></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex"> matrix\_a\_ =
\begin{bmatrix}
0 &#x26; 1 &#x26; 0 &#x26; 0 \\
0 &#x26; -\frac{C_f+C_r}{mV} &#x26; \frac{C_f+C_r}{m} &#x26; \frac{\ell_rC_r-\ell_fC_f}{mV} \\
0 &#x26; 0 &#x26; 0 &#x26; 1 \\
0 &#x26; \frac{\ell_rC_r-\ell_fC_f}{I_zV} &#x26; \frac{\ell_fC_f-\ell_rC_r}{I_z} &#x26; \frac{\ell_r^2C_r-\ell_f^2C_f}{IzV}
\end{bmatrix}
\tag{7}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">x</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">a</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 5.43563em; vertical-align: -2.46781em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.95301em;"><span class="" style="top: -1.34999em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎣</span></span></span><span class="" style="top: -2.50499em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -3.10599em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -3.70699em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -4.95301em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.45003em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.96781em;"><span class="" style="top: -5.35915em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -3.99997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -2.79997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -1.20863em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.46781em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.96781em;"><span class="" style="top: -5.35915em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">1</span></span></span><span class="" style="top: -3.99997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.991411em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mord mathit mtight" style="margin-right: 0.22222em;">V</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.79997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -1.20863em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.999188em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07847em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mord mathit mtight" style="margin-right: 0.22222em;">V</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4451em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.46781em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.96781em;"><span class="" style="top: -5.35915em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -3.99997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.991411em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.79997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -1.20863em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.999188em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07847em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4451em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.46781em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.96781em;"><span class="" style="top: -5.35915em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -3.99997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.999188em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mord mathit mtight" style="margin-right: 0.22222em;">V</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.79997em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord">1</span></span></span><span class="" style="top: -1.20863em;"><span class="pstrut" style="height: 3.23134em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.23134em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07847em;">I</span><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span><span class="mord mathit mtight" style="margin-right: 0.22222em;">V</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.60742em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.891314em;"><span class="" style="top: -2.214em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.891314em;"><span class="" style="top: -2.214em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.424886em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.46781em;"><span class=""></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.95301em;"><span class="" style="top: -1.34999em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎦</span></span></span><span class="" style="top: -2.50499em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -3.10599em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -3.70699em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -4.95301em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.45003em;"><span class=""></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height: 5.43563em; vertical-align: -2.46781em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">7</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>由于动力学模型基于单车模型，它将左右两侧轮胎合并为一个轮胎，因此式中的转角刚度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>C</mi><mi>f</mi></msub><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><msub><mi>C</mi><mi>r</mi></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      C_f&amp;#x3001;C_r</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-785" style="width: 3.3em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.788em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1002.79em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-786"><span style="display: inline-block; position: relative; width: 2.788em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1002.79em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-787"><span class="mrow" id="MathJax-Span-788"><span class="msub" id="MathJax-Span-789"><span style="display: inline-block; position: relative; width: 1.179em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.76em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-790" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.715em;"><span class="mi" id="MathJax-Span-791" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-792"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="msub" id="MathJax-Span-793"><span style="display: inline-block; position: relative; width: 1.109em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.76em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-794" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.715em;"><span class="mi" id="MathJax-Span-795" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.407em; border-left: 0px solid; width: 0px; height: 1.411em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>f</mi></msub><mi mathvariant="normal">、</mi><msub><mi>C</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">      C_f、C_r</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-32"><math><semantics><mrow><msub><mi>C</mi><mi>f</mi></msub><mi mathvariant="normal">、</mi><msub><mi>C</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">C_f、C_r</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>应为单边转角刚度的2倍，文中均如此。<br>
与<a href="https://blog.csdn.net/u013914471/article/details/83018664" rel="nofollow" target="_blank">动力学模型</a>中的公式24的首项系数吻合。在没有预估的情况下，matrix_adc_=matrix_ad_， <code>matrix_ad_</code> 为离散时间下的状态矩阵，<strong>采用的是<a href="https://wenku.baidu.com/view/0d708301f90f76c660371a92.html" rel="nofollow" target="_blank">双线性变换离散法</a>。感谢博友<a href="https://me.csdn.net/llcccjj" rel="nofollow" target="_blank">LLCCCJJ</a>的友情提示。</strong></p>
<p>控制矩阵B，即代码中的<code>matrix_b_</code>，<code>matrix_bd_</code> 为离散时间下的控制矩阵：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  matrix_b_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>basic_state_size_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_bd_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>basic_state_size_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
matrix_bdc_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>matrix_size<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_b_</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> cf_ <span class="token operator">/</span> mass_<span class="token punctuation">;</span>
<span class="token function">matrix_b_</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> lf_ <span class="token operator">*</span> cf_ <span class="token operator">/</span> iz_<span class="token punctuation">;</span>
matrix_bd_ <span class="token operator">=</span> matrix_b_ <span class="token operator">*</span> ts_<span class="token punctuation">;</span>

matrix_bdc_<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> basic_state_size_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> matrix_bd_<span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li></ul></pre>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-33-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(8)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>b</mi><mi mathvariant=&quot;normal&quot;>_</mi><mo>=</mo><mrow><mo fence=&quot;true&quot;>[</mo><mtable><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><msub><mi>c</mi><mi>f</mi></msub><mi>m</mi></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mfrac><mrow><msub><mi mathvariant=&quot;normal&quot;>&amp;#x2113;</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd></mtr></mtable><mo fence=&quot;true&quot;>]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      matrix\_b\_=\begin{bmatrix}0 \\\frac{c_f}{m} \\0 \\\frac{\ell_fC_f}{I_z}\end{bmatrix} \tag{8}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-796" style="width: 100%; display: inline-block; min-width: 13.54em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 13.54em;"><span style="position: absolute; clip: rect(3.706em, 1009.06em, 10.113em, -1000em); top: -7.159em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-797"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 13.54em;"><span style="position: absolute; clip: rect(3.706em, 1009.06em, 10.113em, -1000em); top: -7.159em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-798"><span class="mtable" id="MathJax-Span-799" style="min-width: 13.54em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 13.54em;"><span style="display: inline-block; position: absolute; width: 9.384em; height: 0px; clip: rect(-3.454em, 1009.06em, 2.954em, -1000em); top: 0em; left: 50%; margin-left: -4.692em;"><span style="position: absolute; clip: rect(3.706em, 1009.06em, 10.113em, -1000em); top: -7.159em; left: 0em;"><span style="display: inline-block; position: relative; width: 9.384em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.706em, 1009.06em, 10.113em, -1000em); top: -7.159em; left: 0em;"><span class="mtd" id="MathJax-Span-803"><span class="mrow" id="MathJax-Span-804"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.706em, 1009.06em, 10.113em, -1000em); top: -7.159em; left: 50%; margin-left: -4.692em;"><span class="mrow" id="MathJax-Span-805"><span class="mi" id="MathJax-Span-806" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-807" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-808" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-809" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-810" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-811" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-812" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-813" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-814" style="font-family: MathJax_Main;">_</span><span class="mo" id="MathJax-Span-815" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-816" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-817" style="vertical-align: 3.323em;"><span style="display: inline-block; position: relative; width: 0.667em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.838em; left: 0em;">⎡<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.511em; left: 0em;">⎣<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.668em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.143em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.618em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.092em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.433em; left: 0em;">⎢<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mtable" id="MathJax-Span-818" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.817em; height: 0px;"><span style="position: absolute; clip: rect(3.71em, 1001.82em, 9.983em, -1000em); top: -7.029em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.817em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -6.515em; left: 0em;"><span class="mtd" id="MathJax-Span-819"><span class="mrow" id="MathJax-Span-820"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-821"><span class="mrow" id="MathJax-Span-822"><span class="mn" id="MathJax-Span-823" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.946em, 1000.99em, 4.475em, -1000em); top: -4.969em; left: 0em;"><span class="mtd" id="MathJax-Span-824"><span class="mrow" id="MathJax-Span-825"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.946em, 1000.99em, 4.475em, -1000em); top: -3.992em; left: 50%; margin-left: -0.497em;"><span class="mstyle" id="MathJax-Span-826"><span class="mrow" id="MathJax-Span-827"><span class="mfrac" id="MathJax-Span-828"><span style="display: inline-block; position: relative; width: 0.754em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.549em, 1000.63em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -0.317em;"><span class="msub" id="MathJax-Span-829"><span style="display: inline-block; position: relative; width: 0.634em; height: 0px;"><span style="position: absolute; clip: rect(3.549em, 1000.3em, 4.13em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-830" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.306em;"><span class="mi" id="MathJax-Span-831" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.549em, 1000.61em, 4.13em, -1000em); top: -3.647em; left: 50%; margin-left: -0.31em;"><span class="mi" id="MathJax-Span-832" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">m</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.75em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.754em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.386em; left: 0em;"><span class="mtd" id="MathJax-Span-833"><span class="mrow" id="MathJax-Span-834"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.46em, 4.144em, -1000em); top: -3.992em; left: 50%; margin-left: -0.25em;"><span class="mstyle" id="MathJax-Span-835"><span class="mrow" id="MathJax-Span-836"><span class="mn" id="MathJax-Span-837" style="font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(2.76em, 1001.82em, 4.608em, -1000em); top: -1.654em; left: 0em;"><span class="mtd" id="MathJax-Span-838"><span class="mrow" id="MathJax-Span-839"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.76em, 1001.82em, 4.608em, -1000em); top: -3.992em; left: 50%; margin-left: -0.908em;"><span class="mstyle" id="MathJax-Span-840"><span class="mrow" id="MathJax-Span-841"><span class="mfrac" id="MathJax-Span-842"><span style="display: inline-block; position: relative; width: 1.577em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.363em, 1001.46em, 4.334em, -1000em); top: -4.595em; left: 50%; margin-left: -0.728em;"><span class="mrow" id="MathJax-Span-843"><span style="display: inline-block; position: relative; width: 1.457em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1001.46em, 4.334em, -1000em); top: -3.992em; left: 0em;"><span class="msub" id="MathJax-Span-844"><span style="display: inline-block; position: relative; width: 0.623em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.28em, 4.136em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-845" style="font-size: 70.7%; font-family: MathJax_Main;">ℓ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.295em;"><span class="mi" id="MathJax-Span-846" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msub" id="MathJax-Span-847"><span style="display: inline-block; position: relative; width: 0.834em; height: 0px;"><span style="position: absolute; clip: rect(3.363em, 1000.54em, 4.138em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-848" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.883em; left: 0.506em;"><span class="mi" id="MathJax-Span-849" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.03em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.6em, 4.234em, -1000em); top: -3.618em; left: 50%; margin-left: -0.299em;"><span class="msub" id="MathJax-Span-850"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.379em, 1000.36em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-851" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.886em; left: 0.311em;"><span class="mi" id="MathJax-Span-852" style="font-size: 50%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1001.58em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 1.577em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.029em;"></span></span></span></span><span class="mo" id="MathJax-Span-853" style="vertical-align: 3.323em;"><span style="display: inline-block; position: relative; width: 0.667em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.838em; left: 0em;">⎤<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.511em; left: 0em;">⎦<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.668em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.143em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.618em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.092em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.433em; left: 0em;">⎥<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.159em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.159em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.159em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-800"><span class="mrow" id="MathJax-Span-801"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-802" style="font-family: MathJax_Main;">(8)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.159em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.159em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.411em; border-left: 0px solid; width: 0px; height: 7.418em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(8)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>b</mi><mi mathvariant="normal">_</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><msub><mi>c</mi><mi>f</mi></msub><mi>m</mi></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      matrix\_b\_=\begin{bmatrix}0 \\\frac{c_f}{m} \\0 \\\frac{\ell_fC_f}{I_z}\end{bmatrix} \tag{8}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-33"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(8)</mtext></mtd><mtd><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>b</mi><mi mathvariant="normal">_</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><msub><mi>c</mi><mi>f</mi></msub><mi>m</mi></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mfrac><mrow><msub><mi mathvariant="normal">ℓ</mi><mi>f</mi></msub><msub><mi>C</mi><mi>f</mi></msub></mrow><msub><mi>I</mi><mi>z</mi></msub></mfrac></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">matrix\_b\_=
\begin{bmatrix}
0 \\
\frac{c_f}{m} \\
0 \\
\frac{\ell_fC_f}{I_z}
\end{bmatrix} \tag{8}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">x</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">b</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 5.04429em; vertical-align: -2.27214em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.65201em;"><span class="" style="top: -1.64999em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎣</span></span></span><span class="" style="top: -2.80499em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -3.40599em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -4.65201em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.15003em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.77214em;"><span class="" style="top: -4.93214em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -3.73214em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814472em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.53214em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -1.17296em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.999188em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.164543em;"><span class="" style="top: -2.357em; margin-left: -0.07847em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.51308em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">ℓ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: -0.07153em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.290114em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4451em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.27214em;"><span class=""></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.65201em;"><span class="" style="top: -1.64999em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎦</span></span></span><span class="" style="top: -2.80499em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -3.40599em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -4.65201em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.15003em;"><span class=""></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height: 5.04429em; vertical-align: -2.27214em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">8</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>与<a href="https://blog.csdn.net/u013914471/article/details/83018664" rel="nofollow" target="_blank">动力学模型</a>中公式24的<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>&amp;#x3B4;</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      \delta</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-854" style="width: 0.523em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.451em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-855"><span style="display: inline-block; position: relative; width: 0.451em; height: 0px;"><span style="position: absolute; clip: rect(3.145em, 1000.45em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-856"><span class="mrow" id="MathJax-Span-857"><span class="mi" id="MathJax-Span-858" style="font-family: MathJax_Math; font-style: italic;">δ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.064em; border-left: 0px solid; width: 0px; height: 0.968em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">      \delta</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-34"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.03785em;">δ</span></span></span></span></span>的系数吻合。在没有预估的情况下，matrix_bdc_=matrix_bd_。</p>
<p>对于控制系统，求其最优控制解的方法有很多，apollo用的是LQR调节器(可参考一下官方讲解视频：<a href="https://classroom.udacity.com/courses/ud0419/lessons/b3980999-44c1-4544-8215-0132d26f116d/concepts/eb850dff-93cd-4ed6-82c5-66e8a8f63412" rel="nofollow" target="_blank">线性二次调节器</a>)，它求解的核心是设计一个能量函数，最优的控制轨迹应该使得该能量函数最小。能量函数的一般形式为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-35-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(9)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>&amp;#x222B;</mo><mn>0</mn><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msubsup><mo>(</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>)</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      J=\frac{1}{2}\int_0^\infty (x^TQx+u^TRu)dt \tag{9}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-859" style="width: 100%; display: inline-block; min-width: 16.493em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 16.493em;"><span style="position: absolute; clip: rect(2.998em, 1012.31em, 4.486em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-860"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 16.493em;"><span style="position: absolute; clip: rect(2.998em, 1012.31em, 4.486em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-861"><span class="mtable" id="MathJax-Span-862" style="min-width: 16.493em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 16.493em;"><span style="display: inline-block; position: absolute; width: 12.337em; height: 0px; clip: rect(-0.994em, 1012.31em, 0.494em, -1000em); top: 0em; left: 50%; margin-left: -6.168em;"><span style="position: absolute; clip: rect(2.998em, 1012.31em, 4.486em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 12.337em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.997em, 1012.31em, 4.484em, -1000em); top: -3.991em; left: 0em;"><span class="mtd" id="MathJax-Span-866"><span class="mrow" id="MathJax-Span-867"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.997em, 1012.31em, 4.484em, -1000em); top: -3.992em; left: 50%; margin-left: -6.168em;"><span class="mrow" id="MathJax-Span-868"><span class="mi" id="MathJax-Span-869" style="font-family: MathJax_Math; font-style: italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.078em;"></span></span><span class="mo" id="MathJax-Span-870" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mfrac" id="MathJax-Span-871" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.474em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.391em, 1000.3em, 4.122em, -1000em); top: -4.386em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-872" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.32em, 4.122em, -1000em); top: -3.63em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-873" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.47em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.474em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-874" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.484em; height: 0px;"><span style="position: absolute; clip: rect(3.056em, 1000.61em, 4.428em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-875" style="font-family: MathJax_Size1; text-rendering: optimizelegibility; vertical-align: 0em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.138em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.549em, 1000.78em, 4.13em, -1000em); top: -4.524em; left: 0.701em;"><span class="mi" id="MathJax-Span-876" style="font-size: 70.7%; font-family: MathJax_Main;">∞</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.43em, 4.138em, -1000em); top: -3.651em; left: 0.472em;"><span class="mn" id="MathJax-Span-877" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-878" style="vertical-align: 0em;"><span style="font-family: MathJax_Size1;">(</span></span><span class="msup" id="MathJax-Span-879"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-880" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-881" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-882" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-883" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-884" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msup" id="MathJax-Span-885" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-886" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-887" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-888" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-889" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-890" style="vertical-align: 0em;"><span style="font-family: MathJax_Size1;">)</span></span><span class="mi" id="MathJax-Span-891" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-892" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.879em, 1001.18em, 0.381em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.991em; left: 0em;"><span class="mtd" id="MathJax-Span-863"><span class="mrow" id="MathJax-Span-864"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-865" style="font-family: MathJax_Main;">(9)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.484em; border-left: 0px solid; width: 0px; height: 1.563em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(9)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>∫</mo><mn>0</mn><mi mathvariant="normal">∞</mi></msubsup><mo>(</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>)</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      J=\frac{1}{2}\int_0^\infty (x^TQx+u^TRu)dt \tag{9}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-35"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(9)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>∫</mo><mn>0</mn><mi mathvariant="normal">∞</mi></msubsup><mo>(</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>)</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">J=\frac{1}{2}\int_0^\infty (x^TQx+u^TRu)dt \tag{9}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.32624em; vertical-align: -0.91195em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right: 0.44445em; position: relative; top: -0.001125em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.41429em;"><span class="" style="top: -1.78805em; margin-left: -0.44445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span class="" style="top: -3.8129em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.91195em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit">Q</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.14133em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit">u</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit">t</span></span><span class="tag"><span class="strut" style="height: 2.32624em; vertical-align: -0.91195em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">9</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>Q</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Q</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-893" style="width: 0.957em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-894"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-895"><span class="mrow" id="MathJax-Span-896"><span class="mi" id="MathJax-Span-897" style="font-family: MathJax_Math; font-style: italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.172em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">      Q</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-36"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathit">Q</span></span></span></span></span>是半正定矩阵，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>R</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      R</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-898" style="width: 0.913em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-899"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-900"><span class="mrow" id="MathJax-Span-901"><span class="mi" id="MathJax-Span-902" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.077em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">      R</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-37"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span></span></span>为正定矩阵，可自行设计。</p>
<p>设计LQR控制器，需要求取<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>K</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      K</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-903" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-904"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-905"><span class="mrow" id="MathJax-Span-906"><span class="mi" id="MathJax-Span-907" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.916em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">      K</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-38"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.07153em;">K</span></span></span></span></span>矩阵，计算反馈矩阵<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>K</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      K</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-908" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-909"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-910"><span class="mrow" id="MathJax-Span-911"><span class="mi" id="MathJax-Span-912" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.916em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">      K</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-39"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.07153em;">K</span></span></span></span></span>的过程：</p>
<ol>
<li>选择参数矩阵<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>Q</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Q</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-913" style="width: 0.957em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-914"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-915"><span class="mrow" id="MathJax-Span-916"><span class="mi" id="MathJax-Span-917" style="font-family: MathJax_Math; font-style: italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.172em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">      Q</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-40"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathit">Q</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>R</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      R</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-918" style="width: 0.913em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-919"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-920"><span class="mrow" id="MathJax-Span-921"><span class="mi" id="MathJax-Span-922" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.077em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">      R</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-41"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span></span></span>；</li>
<li>求解Riccati 方程得到矩阵<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>P</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      P</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-923" style="width: 0.913em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.75em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-924"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.75em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-925"><span class="mrow" id="MathJax-Span-926"><span class="mi" id="MathJax-Span-927" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.916em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">      P</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-42"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span></span></span></span></span>；</li>
<li>计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>K</mi><mo>=</mo><msup><mi>R</mi><mrow><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup><msup><mi>B</mi><mi>T</mi></msup><mi>P</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      K=R^{-1}B^TP</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-928" style="width: 7.205em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.043em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.02em, 1006.04em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-929"><span style="display: inline-block; position: relative; width: 6.043em; height: 0px;"><span style="position: absolute; clip: rect(3.02em, 1006.04em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-930"><span class="mrow" id="MathJax-Span-931"><span class="mi" id="MathJax-Span-932" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mo" id="MathJax-Span-933" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msup" id="MathJax-Span-934" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.738em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-935" style="font-family: MathJax_Math; font-style: italic;">R</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.759em;"><span class="mrow" id="MathJax-Span-936"><span class="mo" id="MathJax-Span-937" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-938" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="msup" id="MathJax-Span-939"><span style="display: inline-block; position: relative; width: 1.332em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-940" style="font-family: MathJax_Math; font-style: italic;">B</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.759em;"><span class="mi" id="MathJax-Span-941" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-942" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.077em; border-left: 0px solid; width: 0px; height: 1.13em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msup><mi>R</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>B</mi><mi>T</mi></msup><mi>P</mi></mrow><annotation encoding="application/x-tex">      K=R^{-1}B^TP</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-43"><math><semantics><mrow><mi>K</mi><mo>=</mo><msup><mi>R</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>B</mi><mi>T</mi></msup><mi>P</mi></mrow><annotation encoding="application/x-tex">K=R^{-1}B^TP</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.841331em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span></span></span></span></span>。</li>
</ol>
<p>LQR的求解过程可参看<a href="https://blog.csdn.net/datase/article/details/78487126" rel="nofollow" target="_blank">LQR</a>，感兴趣的可以研究一下，matlab、python等也提供的都有用于求解LQR模型的函数。</p>
<p>Apollo中对Q、R矩阵的定义如下：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  lqr_eps_ <span class="token operator">=</span> control_conf<span class="token operator">-&gt;</span><span class="token function">lat_controller_conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lqr_max_iteration_ <span class="token operator">=</span> control_conf<span class="token operator">-&gt;</span><span class="token function">lat_controller_conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max_iteration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

query_relative_time_ <span class="token operator">=</span> control_conf<span class="token operator">-&gt;</span><span class="token function">query_relative_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

matrix_k_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> matrix_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_r_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Identity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
matrix_q_ <span class="token operator">=</span> Matrix<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Zero</span><span class="token punctuation">(</span>matrix_size<span class="token punctuation">,</span> matrix_size<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> q_param_size <span class="token operator">=</span> control_conf<span class="token operator">-&gt;</span><span class="token function">lat_controller_conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">matrix_q_size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> q_param_size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">matrix_q_</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> control_conf<span class="token operator">-&gt;</span><span class="token function">lat_controller_conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">matrix_q</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

matrix_q_updated_ <span class="token operator">=</span> matrix_q_<span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li></ul></pre>
<p>求取K矩阵的代码：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  <span class="token keyword">if</span> <span class="token punctuation">(</span>FLAGS_enable_gain_scheduler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">matrix_q_updated_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span>
<span class="token function">matrix_q_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span>
lat_err_interpolation_<span class="token operator">-&gt;</span><span class="token function">Interpolate</span><span class="token punctuation">(</span>
VehicleStateProvider<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">linear_velocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">matrix_q_updated_</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span>
<span class="token function">matrix_q_</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span>
heading_err_interpolation_<span class="token operator">-&gt;</span><span class="token function">Interpolate</span><span class="token punctuation">(</span>
VehicleStateProvider<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">linear_velocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
common<span class="token punctuation">:</span><span class="token punctuation">:</span>math<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SolveLQRProblem</span><span class="token punctuation">(</span>matrix_adc_<span class="token punctuation">,</span> matrix_bdc_<span class="token punctuation">,</span> matrix_q_updated_<span class="token punctuation">,</span>
                      matrix_r_<span class="token punctuation">,</span> lqr_eps_<span class="token punctuation">,</span> lqr_max_iteration_<span class="token punctuation">,</span>
                      <span class="token operator">&amp;</span>matrix_k_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
common<span class="token punctuation">:</span><span class="token punctuation">:</span>math<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SolveLQRProblem</span><span class="token punctuation">(</span>matrix_adc_<span class="token punctuation">,</span> matrix_bdc_<span class="token punctuation">,</span> matrix_q_<span class="token punctuation">,</span>
                      matrix_r_<span class="token punctuation">,</span> lqr_eps_<span class="token punctuation">,</span> lqr_max_iteration_<span class="token punctuation">,</span>
                      <span class="token operator">&amp;</span>matrix_k_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li></ul></pre>
<p>其中，状态变量<code>matrix_state_</code>、混合状态矩阵<code>matrix_adc_</code>、混合控制矩阵<code>matrix_bdc_</code>、增益矩阵<code>matrix_k_</code>是时变的，状态权重矩阵<code>matrix_q_</code>可能是时变的，控制权重矩阵<code>matrix_r_</code>、阈值<code>lqr_eps_</code>、最大迭代次数<code>lqr_max_iteration_</code>是固定的。</p>
<p>求出<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>K</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      K</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-943" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-944"><span style="display: inline-block; position: relative; width: 0.889em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-945"><span class="mrow" id="MathJax-Span-946"><span class="mi" id="MathJax-Span-947" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.916em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">      K</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-44"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.07153em;">K</span></span></span></span></span>矩阵后，即可求最优控制解：</p>
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)">  <span class="token comment">// feedback = - K * state</span>
<span class="token comment">// Convert vehicle steer angle from rad to degree and then to steer degree</span>
<span class="token comment">// then to 100% ratio</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> steer_angle_feedback <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>matrix_k_ <span class="token operator">*</span> matrix_state_<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span>
                          M_PI <span class="token operator">*</span> steer_transmission_ratio_ <span class="token operator">/</span>
                          steer_single_direction_max_degree_ <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">double</span> steer_angle_feedforward <span class="token operator">=</span> <span class="token function">ComputeFeedForward</span><span class="token punctuation">(</span>debug<span class="token operator">-&gt;</span><span class="token function">curvature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Clamp the steer angle to -100.0 to 100.0</span>
<span class="token keyword">double</span> steer_angle <span class="token operator">=</span> common<span class="token punctuation">:</span><span class="token punctuation">:</span>math<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Clamp</span><span class="token punctuation">(</span>
steer_angle_feedback <span class="token operator">+</span> steer_angle_feedforward<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">100.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li></ul></pre>
<h1><a name="t6"></a><a id="_334" target="_blank"></a>总结</h1>
<p>本文详述了Apollo的横纵向控制，纵向控制的主体是PID控制，横向控制的主体是前馈控制器加反馈控制器，反馈控制器的设计依赖于LQR模型；Apollo中的MPC基于横纵向控制设计。<br>
由于对线性化、离散化等知识理解有限，故在此篇中未对LQR的求解做展开说明，下篇文章将尝试对非线性系统的线性化、求最优解等进行分析。</p>
<h1><a name="t7"></a><a id="_20181128_338" target="_blank"></a>补充 2018.11.28</h1>
<p>很多人（包括我）对于横向误差<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      lateral\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-948" style="width: 6.815em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-949"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-950"><span class="mrow" id="MathJax-Span-951"><span class="mi" id="MathJax-Span-952" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-953" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-954" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-955" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-956" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-957" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-958" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-959" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-960" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-961" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-962" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-963" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-964" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      lateral\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-45"><math><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">lateral\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>和纵向误差中的位误差<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      station\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-965" style="width: 7.075em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-966"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-967"><span class="mrow" id="MathJax-Span-968"><span class="mi" id="MathJax-Span-969" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-970" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-971" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-972" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-973" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-974" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-975" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-976" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-977" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-978" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-979" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-980" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-981" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 0.964em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      station\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-46"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">station\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>的计算不太明白，我就试着去解释一下吧。</p>
<p>首先，对于坐标系下任一点<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mo>(</mo><mi>x</mi><mo separator=&quot;true&quot;>,</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      (x,y)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-982" style="width: 2.736em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.291em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.2em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-983"><span style="display: inline-block; position: relative; width: 2.291em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.2em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-984"><span class="mrow" id="MathJax-Span-985"><span class="mo" id="MathJax-Span-986" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-987" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-988" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-989" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-990" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      (x,y)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-47"><math><semantics><mrow><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span></span></span>，假设如图6所示，将坐标轴绕原点向左旋转<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>&amp;#x3B8;</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      \theta</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-991" style="width: 0.566em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.469em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-992"><span style="display: inline-block; position: relative; width: 0.469em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-993"><span class="mrow" id="MathJax-Span-994"><span class="mi" id="MathJax-Span-995" style="font-family: MathJax_Math; font-style: italic;">θ</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.064em; border-left: 0px solid; width: 0px; height: 0.954em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">      \theta</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-48"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span></span></span></span>角度后的坐标值<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mo>(</mo><msup><mi>x</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup><mo separator=&quot;true&quot;>,</mo><msup><mi>y</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      (x',y')</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-996" style="width: 3.43em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.882em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.103em, 1002.79em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-997"><span style="display: inline-block; position: relative; width: 2.882em; height: 0px;"><span style="position: absolute; clip: rect(3.103em, 1002.79em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-998"><span class="mrow" id="MathJax-Span-999"><span class="mo" id="MathJax-Span-1000" style=""><span style="font-family: MathJax_Main;">(</span></span><span class="msup" id="MathJax-Span-1001"><span style="display: inline-block; position: relative; width: 0.841em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1002" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-1003" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1004" style="font-family: MathJax_Main;">,</span><span class="msup" id="MathJax-Span-1005" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.817em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1006" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.548em;"><span class="mo" id="MathJax-Span-1007" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1008" style=""><span style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.304em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>(</mo><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">      (x',y')</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-49"><math><semantics><mrow><mo>(</mo><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(x',y')</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00189em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>满足以下等式：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-50-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(10)</mtext></mtd><mtd><mrow><mo fence=&quot;true&quot;>{</mo><mtable><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mrow><msup><mi>x</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup><mo>=</mo><mi>O</mi><mi>A</mi><mo>+</mo><mi>B</mi><mi>C</mi><mo>=</mo><mi>x</mi><mi>cos</mi><mo>&amp;#x2061;</mo><mi>&amp;#x3B8;</mi><mo>+</mo><mi>y</mi><mi>sin</mi><mo>&amp;#x2061;</mo><mi>&amp;#x3B8;</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;><mrow><msup><mi>y</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup><mo>=</mo><mi>P</mi><mi>C</mi><mo>&amp;#x2212;</mo><mi>A</mi><mi>B</mi><mo>=</mo><mi>y</mi><mi>cos</mi><mo>&amp;#x2061;</mo><mi>&amp;#x3B8;</mi><mo>&amp;#x2212;</mo><mi>x</mi><mi>sin</mi><mo>&amp;#x2061;</mo><mi>&amp;#x3B8;</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \begin{cases}x'=OA+BC=x\cos{\theta}+y\sin{\theta}\\y'=PC-AB=y\cos{\theta}-x\sin{\theta}\end{cases}\tag{10}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1009" style="width: 100%; display: inline-block; min-width: 20.465em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 20.465em;"><span style="position: absolute; clip: rect(2.392em, 1015.14em, 5.092em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-1010"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 20.465em;"><span style="position: absolute; clip: rect(2.392em, 1015.14em, 5.092em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-1011"><span class="mtable" id="MathJax-Span-1012" style="min-width: 20.465em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 20.465em;"><span style="display: inline-block; position: absolute; width: 15.309em; height: 0px; clip: rect(-1.6em, 1015.14em, 1.1em, -1000em); top: 0em; left: 50%; margin-left: -7.655em;"><span style="position: absolute; clip: rect(2.392em, 1015.14em, 5.092em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 15.309em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.392em, 1015.14em, 5.092em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-1016"><span class="mrow" id="MathJax-Span-1017"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.392em, 1015.14em, 5.092em, -1000em); top: -3.992em; left: 50%; margin-left: -7.655em;"><span class="mrow" id="MathJax-Span-1018"><span class="mo" id="MathJax-Span-1019" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">{</span></span><span class="mtable" id="MathJax-Span-1020" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 14.225em; height: 0px;"><span style="position: absolute; clip: rect(2.433em, 1014.22em, 5.092em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 14.225em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.103em, 1014.22em, 4.327em, -1000em); top: -4.662em; left: 0em;"><span class="mtd" id="MathJax-Span-1021"><span class="mrow" id="MathJax-Span-1022"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.103em, 1014.22em, 4.327em, -1000em); top: -3.992em; left: 50%; margin-left: -7.113em;"><span class="mstyle" id="MathJax-Span-1023"><span class="mrow" id="MathJax-Span-1024"><span class="mrow" id="MathJax-Span-1025"><span class="msup" id="MathJax-Span-1026"><span style="display: inline-block; position: relative; width: 0.841em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1027" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-1028" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1029" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1030" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">O</span><span class="mi" id="MathJax-Span-1031" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1032" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1033" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-1034" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-1035" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1036" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-1037" style="font-family: MathJax_Main; padding-left: 0.167em;">cos</span><span class="mo" id="MathJax-Span-1038"></span><span class="mi" id="MathJax-Span-1039" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">θ</span><span class="mo" id="MathJax-Span-1040" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1041" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-1042" style="font-family: MathJax_Main; padding-left: 0.167em;">sin</span><span class="mo" id="MathJax-Span-1043"></span><span class="mi" id="MathJax-Span-1044" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">θ</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; width: 100%; clip: rect(3.103em, 1014.18em, 4.327em, -1000em); top: -3.227em; left: 0em;"><span class="mtd" id="MathJax-Span-1045"><span class="mrow" id="MathJax-Span-1046"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.103em, 1014.18em, 4.327em, -1000em); top: -3.992em; left: 50%; margin-left: -7.095em;"><span class="mstyle" id="MathJax-Span-1047"><span class="mrow" id="MathJax-Span-1048"><span class="mrow" id="MathJax-Span-1049"><span class="msup" id="MathJax-Span-1050"><span style="display: inline-block; position: relative; width: 0.817em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1051" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.548em;"><span class="mo" id="MathJax-Span-1052" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1053" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1054" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-1055" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-1056" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-1057" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">A</span><span class="mi" id="MathJax-Span-1058" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-1059" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1060" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-1061" style="font-family: MathJax_Main; padding-left: 0.167em;">cos</span><span class="mo" id="MathJax-Span-1062"></span><span class="mi" id="MathJax-Span-1063" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">θ</span><span class="mo" id="MathJax-Span-1064" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-1065" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">x</span><span class="mi" id="MathJax-Span-1066" style="font-family: MathJax_Main; padding-left: 0.167em;">sin</span><span class="mo" id="MathJax-Span-1067"></span><span class="mi" id="MathJax-Span-1068" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">θ</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.778em; height: 0px; clip: rect(-0.88em, 1001.68em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-1013"><span class="mrow" id="MathJax-Span-1014"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.889em;"><span class="mtext" id="MathJax-Span-1015" style="font-family: MathJax_Main;">(10)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.206em; border-left: 0px solid; width: 0px; height: 3.008em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(10)</mtext></mtd><mtd><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>O</mi><mi>A</mi><mo>+</mo><mi>B</mi><mi>C</mi><mo>=</mo><mi>x</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>+</mo><mi>y</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>P</mi><mi>C</mi><mo>−</mo><mi>A</mi><mi>B</mi><mo>=</mo><mi>y</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>−</mo><mi>x</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \begin{cases}x'=OA+BC=x\cos{\theta}+y\sin{\theta}\\y'=PC-AB=y\cos{\theta}-x\sin{\theta}\end{cases}\tag{10}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-50"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(10)</mtext></mtd><mtd><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>O</mi><mi>A</mi><mo>+</mo><mi>B</mi><mi>C</mi><mo>=</mo><mi>x</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>+</mo><mi>y</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>P</mi><mi>C</mi><mo>−</mo><mi>A</mi><mi>B</mi><mo>=</mo><mi>y</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>−</mo><mi>x</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\begin{cases}
x'=OA+BC=x\cos{\theta}+y\sin{\theta}\\
y'=PC-AB=y\cos{\theta}-x\sin{\theta}
\end{cases}\tag{10}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 3.00003em; vertical-align: -1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit">A</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height: 3.00003em; vertical-align: -1.25003em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
可自行推广到其他角度或象限的旋转。坐标系旋转可参考博客：<a href="https://www.cnblogs.com/softhal/p/5648463.html" rel="nofollow" target="_blank">二维坐标系的转换</a>。</p>
<div align="center"><img src="https://img-blog.csdnimg.cn/20181128140408981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=,size_16,color_FFFFFF,t_70"></div>
<center>图6 坐标旋转</center>
<p>结合图3和代码中的注释，可得图7，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      V_{des}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1069" style="width: 2.042em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1001.69em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1070"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1001.69em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1071"><span class="mrow" id="MathJax-Span-1072"><span class="msub" id="MathJax-Span-1073"><span style="display: inline-block; position: relative; width: 1.689em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.77em, 4.144em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1074" style="font-family: MathJax_Math; font-style: italic; text-rendering: optimizelegibility;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.583em;"><span class="mrow" id="MathJax-Span-1075"><span class="mi" id="MathJax-Span-1076" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1077" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1078" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.239em; border-left: 0px solid; width: 0px; height: 1.104em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      V_{des}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-51"><math><semantics><mrow><msub><mi>V</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{des}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>垂直于<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      e_1</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1079" style="width: 1.087em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.9em, 4.272em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1080"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.9em, 4.272em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1081"><span class="mrow" id="MathJax-Span-1082"><span class="msub" id="MathJax-Span-1083"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1084" style="font-family: MathJax_Math; font-style: italic;">e</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.466em;"><span class="mn" id="MathJax-Span-1085" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.23em; border-left: 0px solid; width: 0px; height: 0.808em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">      e_1</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-52"><math><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">e_1</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>e</mi><mi>s</mi></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      e_s</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1086" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.87em, 4.279em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1087"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.87em, 4.279em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1088"><span class="mrow" id="MathJax-Span-1089"><span class="msub" id="MathJax-Span-1090"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1091" style="font-family: MathJax_Math; font-style: italic;">e</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.466em;"><span class="mi" id="MathJax-Span-1092" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.239em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">      e_s</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-53"><math><semantics><mrow><msub><mi>e</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">e_s</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为位置误差<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      station\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1093" style="width: 7.075em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1094"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1095"><span class="mrow" id="MathJax-Span-1096"><span class="mi" id="MathJax-Span-1097" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1098" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1099" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1100" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1101" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1102" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1103" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1104" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1105" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1106" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1107" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1108" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1109" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 0.964em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      station\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-54"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">station\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      e_1</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1110" style="width: 1.087em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.9em, 4.272em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1111"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.9em, 4.272em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1112"><span class="mrow" id="MathJax-Span-1113"><span class="msub" id="MathJax-Span-1114"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1115" style="font-family: MathJax_Math; font-style: italic;">e</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.466em;"><span class="mn" id="MathJax-Span-1116" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.23em; border-left: 0px solid; width: 0px; height: 0.808em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">      e_1</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-55"><math><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">e_1</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为横向误差<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      lateral\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1117" style="width: 6.815em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1118"><span style="display: inline-block; position: relative; width: 5.736em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1005.72em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1119"><span class="mrow" id="MathJax-Span-1120"><span class="mi" id="MathJax-Span-1121" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1122" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1123" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1124" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1125" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1126" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1127" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1128" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1129" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1130" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1131" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1132" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1133" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      lateral\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-56"><math><semantics><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">lateral\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>。</p>
<div align="center"><img src="https://img-blog.csdn.net/20180919191935469?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></div>
<center>图3  Frenét框架下的轨迹</center>
<div align="center"><img src="https://img-blog.csdnimg.cn/20181128161519311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=,size_16,color_FFFFFF,t_70"></div>
<center>图7 横纵向误差示意图</center>
<p>首先，在笛卡尔坐标系中，参考点与真实点间在X、Y轴方向的误差：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo separator=&quot;true&quot;>,</mo><mi>d</mi><mi>y</mi><mo>=</mo><mi>y</mi><mo>&amp;#x2212;</mo><msub><mi>y</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      dx=x-x_{des},dy=y-y_{des}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1134" style="width: 14.321em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.013em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1012.01em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1135"><span style="display: inline-block; position: relative; width: 12.013em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1012.01em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1136"><span class="mrow" id="MathJax-Span-1137"><span class="mi" id="MathJax-Span-1138" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1139" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1140" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1141" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-1142" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msub" id="MathJax-Span-1143" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.678em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1144" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.572em;"><span class="mrow" id="MathJax-Span-1145"><span class="mi" id="MathJax-Span-1146" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1147" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1148" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1149" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1150" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1151" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-1152" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1153" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-1154" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msub" id="MathJax-Span-1155" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.596em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1156" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.49em;"><span class="mrow" id="MathJax-Span-1157"><span class="mi" id="MathJax-Span-1158" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1159" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1160" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo separator="true">,</mo><mi>d</mi><mi>y</mi><mo>=</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      dx=x-x_{des},dy=y-y_{des}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-57"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo separator="true">,</mo><mi>d</mi><mi>y</mi><mo>=</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">dx=x-x_{des},dy=y-y_{des}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.19444em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span><br>
可参看代码，横纵向代码表述有异，但<a href="https://www.baidu.com/s?wd=%E6%AE%8A%E9%80%94%E5%90%8C%E5%BD%92&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank">殊途同归</a>：</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)">  <span class="token comment">// 纵向控制</span>
<span class="token keyword">double</span> dx <span class="token operator">=</span> x <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> dy <span class="token operator">=</span> y <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> cos_ref_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>ref_point<span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> sin_ref_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>ref_point<span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 横向控制</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> dx <span class="token operator">=</span> x <span class="token operator">-</span> target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> dy <span class="token operator">=</span> y <span class="token operator">-</span> target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">double</span> cos_matched_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> sin_matched_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li></ul></pre>
<p><strong>为什么<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>x</mi><mo separator=&quot;true&quot;>,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      dx,dy</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1161" style="width: 3.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1162"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1163"><span class="mrow" id="MathJax-Span-1164"><span class="mi" id="MathJax-Span-1165" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1166" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1167" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1168" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1169" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">      dx,dy</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-58"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">dx,dy</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>是实际点坐标减去参考点坐标？</strong><br>
<strong>个人理解：</strong> 控制的目的是为了将车辆从当前点移动到期望点，分别在<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>x</mi><mi mathvariant=&quot;normal&quot;>&amp;#xFF0C;</mi><mi>y</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      x&amp;#xFF0C;y</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1170" style="width: 1.868em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.568em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1001.57em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1171"><span style="display: inline-block; position: relative; width: 1.568em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1001.57em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1172"><span class="mrow" id="MathJax-Span-1173"><span class="mi" id="MathJax-Span-1174" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1175"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">，</span></span><span class="mi" id="MathJax-Span-1176" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.299em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">，</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">      x，y</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-59"><math><semantics><mrow><mi>x</mi><mi mathvariant="normal">，</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">x，y</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathit">x</span><span class="mord cjk_fallback">，</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>方向上移动<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>x</mi><mo separator=&quot;true&quot;>,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      dx,dy</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1177" style="width: 3.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1178"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1179"><span class="mrow" id="MathJax-Span-1180"><span class="mi" id="MathJax-Span-1181" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1182" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1183" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1184" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1185" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">      dx,dy</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-60"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">dx,dy</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>的距离能到参考点，所以<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>x</mi><mo separator=&quot;true&quot;>,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      dx,dy</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1186" style="width: 3.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1187"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1188"><span class="mrow" id="MathJax-Span-1189"><span class="mi" id="MathJax-Span-1190" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1191" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1192" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1193" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1194" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">      dx,dy</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-61"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">dx,dy</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>是实际点坐标减去参考点坐标。</p>
<p>而怎么从规划轨迹中找对应的参考点，有两种方法， 根据绝对时间或者位置最近进行匹配，</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)">  TrajectoryPoint target_point<span class="token punctuation">;</span>
<span class="token comment">// 绝对时间</span>
target_point <span class="token operator">=</span> trajectory_analyzer<span class="token punctuation">.</span><span class="token function">QueryNearestPointByAbsoluteTime</span><span class="token punctuation">(</span>
current_timestamp <span class="token operator">+</span> query_relative_time_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 相对位置</span>
target_point <span class="token operator">=</span> trajectory_analyzer<span class="token punctuation">.</span><span class="token function">QueryNearestPointByPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre>
<p>按照最近位置寻找匹配点的话，找的其实就是参考点与实际点间<code>连线距离最短</code>的参考点。但这个<code>连线距离最短</code>中的<code>距离</code>，指的不是横向误差，也不是纵向误差，而是<code>两点间连线的长度</code><br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding=&quot;application/x-tex&quot;>      distance=\sqrt{dx^2+dy^2}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1195" style="width: 12.325em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.33em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(2.965em, 1010.33em, 4.425em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1196"><span style="display: inline-block; position: relative; width: 10.33em; height: 0px;"><span style="position: absolute; clip: rect(2.965em, 1010.33em, 4.425em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1197"><span class="mrow" id="MathJax-Span-1198"><span class="mi" id="MathJax-Span-1199" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1200" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1201" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1202" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1203" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1204" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1205" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1206" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-1207" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msqrt" id="MathJax-Span-1208" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 5.27em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1004.25em, 4.327em, -1000em); top: -3.992em; left: 1em;"><span class="mrow" id="MathJax-Span-1209"><span style="display: inline-block; position: relative; width: 4.245em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1004.25em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1210"><span class="mi" id="MathJax-Span-1211" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msup" id="MathJax-Span-1212"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1213" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.572em;"><span class="mn" id="MathJax-Span-1214" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1215" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1216" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msup" id="MathJax-Span-1217"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1218" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.548em;"><span class="mn" id="MathJax-Span-1219" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.589em, 1004.27em, 3.894em, -1000em); top: -4.616em; left: 1em;"><span style="display: inline-block; position: relative; width: 4.27em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: -0.084em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: 3.576em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.417em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.944em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 1.47em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 1.997em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 2.523em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 3.049em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.012em, 1001.02em, 4.472em, -1000em); top: -4.039em; left: 0em;"><span style="font-family: MathJax_Size1;">√</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.413em; border-left: 0px solid; width: 0px; height: 1.531em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">      distance=\sqrt{dx^2+dy^2}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-62"><math><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">distance=\sqrt{dx^2+dy^2}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.24em; vertical-align: -0.233291em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00671em;"><span class="svg-align" style="top: -3.2em;"><span class="pstrut" style="height: 3.2em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord mathit">d</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -2.96671em;"><span class="pstrut" style="height: 3.2em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.28em;"><svg width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.233291em;"><span class=""></span></span></span></span></span></span></span></span></span></span></p>
<p>计算横纵向误差是在S-L坐标系下，而<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>x</mi><mo separator=&quot;true&quot;>,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      dx,dy</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1220" style="width: 3.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1221"><span style="display: inline-block; position: relative; width: 2.559em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1002.56em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1222"><span class="mrow" id="MathJax-Span-1223"><span class="mi" id="MathJax-Span-1224" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1225" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1226" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1227" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1228" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.173em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">      dx,dy</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-63"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">dx,dy</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>是在笛卡尔坐标系下计算的，因此需要进行坐标系转换，简单的来说就是将原始坐标系进行旋转，使其与S-L坐标系重合，如图6所示。且坐标系旋转后，参考点与实际点两点间距离<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      distance</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1229" style="width: 4.471em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.726em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.168em, 1003.69em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1230"><span style="display: inline-block; position: relative; width: 3.726em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1003.69em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1231"><span class="mrow" id="MathJax-Span-1232"><span class="mi" id="MathJax-Span-1233" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1234" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1235" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1236" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1237" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1238" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1239" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1240" style="font-family: MathJax_Math; font-style: italic;">e</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.942em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">      distance</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-64"><math><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">distance</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span></span></span></span></span>应是不变的。</p>
<p><strong>为什么将参考点进行旋转，而不是将实际点进行旋转？</strong><br>
<strong>个人理解：</strong> 控制的目的是为了让汽车按照规划轨迹行驶，当前时刻的误差，肯定是基于参考点得来的，也就是我要找到现在实际的点相较于参考点，在横纵方向上的误差各是多少。因此横纵向误差的计算中的角度使用的期望航向角<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding=&quot;application/x-tex&quot;>      \theta_{des}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1241" style="width: 1.868em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.157em, 1001.58em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1242"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1001.58em, 4.28em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1243"><span class="mrow" id="MathJax-Span-1244"><span class="msub" id="MathJax-Span-1245"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1246" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-1247"><span class="mi" id="MathJax-Span-1248" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1249" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1250" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.239em; border-left: 0px solid; width: 0px; height: 1.13em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">      \theta_{des}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-65"><math><semantics><mrow><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\theta_{des}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。</p>
<p>对于纵向误差的计算，可见代码<a href="https://github.com/ApolloAuto/apollo/blob/master/modules/control/common/trajectory_analyzer.cc" rel="nofollow" target="_blank">trajectory_analyzer.cc</a>以及<a href="https://github.com/ApolloAuto/apollo/blob/master/modules/control/controller/lon_controller.cc" rel="nofollow" target="_blank">lon_controller.cc</a>：</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)">  <span class="token comment">// the sin of diff angle between vector (cos_ref_theta, sin_ref_theta) and</span>
<span class="token comment">// (dx, dy)</span>
<span class="token keyword">double</span> cross_rd_nd <span class="token operator">=</span> cos_ref_theta <span class="token operator">*</span> dy <span class="token operator">-</span> sin_ref_theta <span class="token operator">*</span> dx<span class="token punctuation">;</span>
<span class="token operator">*</span>ptr_d <span class="token operator">=</span> cross_rd_nd<span class="token punctuation">;</span>

<span class="token comment">// the cos of diff angle between vector (cos_ref_theta, sin_ref_theta) and</span>
<span class="token comment">// (dx, dy)</span>
<span class="token keyword">double</span> dot_rd_nd <span class="token operator">=</span> dx <span class="token operator">*</span> cos_ref_theta <span class="token operator">+</span> dy <span class="token operator">*</span> sin_ref_theta<span class="token punctuation">;</span>
<span class="token operator">*</span>ptr_s <span class="token operator">=</span> ref_point<span class="token punctuation">.</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dot_rd_nd<span class="token punctuation">;</span>

<span class="token keyword">double</span> delta_theta <span class="token operator">=</span> theta <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> cos_delta_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>delta_theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> sin_delta_theta <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>delta_theta<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">*</span>ptr_d_dot <span class="token operator">=</span> v <span class="token operator">*</span> sin_delta_theta<span class="token punctuation">;</span>

<span class="token keyword">double</span> one_minus_kappa_r_d <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> ref_point<span class="token punctuation">.</span><span class="token function">kappa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>ptr_d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>one_minus_kappa_r_d <span class="token operator">&lt;=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
AERROR <span class="token operator">&lt;&lt;</span> <span class="token string">"TrajectoryAnalyzer::ToTrajectoryFrame "</span>
  <span class="token string">"found fatal reference and actual difference. "</span>
  <span class="token string">"Control output might be unstable:"</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.kappa:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">kappa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.x:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;&lt;</span> <span class="token string">" ref_point.y:"</span> <span class="token operator">&lt;&lt;</span> ref_point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" car x:"</span> <span class="token operator">&lt;&lt;</span> x
<span class="token operator">&lt;&lt;</span> <span class="token string">" car y:"</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">" *ptr_d:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>ptr_d
<span class="token operator">&lt;&lt;</span> <span class="token string">" one_minus_kappa_r_d:"</span> <span class="token operator">&lt;&lt;</span> one_minus_kappa_r_d<span class="token punctuation">;</span>
<span class="token comment">// currently set to a small value to avoid control crash.</span>
one_minus_kappa_r_d <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">*</span>ptr_s_dot <span class="token operator">=</span> v <span class="token operator">*</span> cos_delta_theta <span class="token operator">/</span> one_minus_kappa_r_d<span class="token punctuation">;</span>

<span class="token comment">// 位置误差, 其中s_matched = ptr_s </span>
debug<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_station_error</span><span class="token punctuation">(</span>reference_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> s_matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 速度误差, 其中s_dot_matched = ptr_s_dot </span>
debug<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_speed_error</span><span class="token punctuation">(</span>reference_point<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> s_dot_matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li><li style="color: rgb(153, 153, 153);">27</li><li style="color: rgb(153, 153, 153);">28</li><li style="color: rgb(153, 153, 153);">29</li><li style="color: rgb(153, 153, 153);">30</li><li style="color: rgb(153, 153, 153);">31</li><li style="color: rgb(153, 153, 153);">32</li><li style="color: rgb(153, 153, 153);">33</li><li style="color: rgb(153, 153, 153);">34</li><li style="color: rgb(153, 153, 153);">35</li><li style="color: rgb(153, 153, 153);">36</li></ul></pre>
<p>纵向位置误差<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      station\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1251" style="width: 7.075em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1252"><span style="display: inline-block; position: relative; width: 5.954em; height: 0px;"><span style="position: absolute; clip: rect(3.201em, 1005.93em, 4.184em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1253"><span class="mrow" id="MathJax-Span-1254"><span class="mi" id="MathJax-Span-1255" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1256" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1257" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1258" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1259" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1260" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1261" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1262" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1263" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1264" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1265" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1266" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1267" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.125em; border-left: 0px solid; width: 0px; height: 0.964em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      station\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-66"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">station\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>为<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-67-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(11)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>&amp;#x2212;</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>&amp;#x2217;</mo><mi>cos</mi><mo>&amp;#x2061;</mo><mrow><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>&amp;#x2217;</mo><mi>sin</mi><mo>&amp;#x2061;</mo><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      station\_error=-(dx*\cos{\theta_{des}+dy*\sin{\theta_{des}}}) \tag{11}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1268" style="width: 100%; display: inline-block; min-width: 25.274em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 25.274em;"><span style="position: absolute; clip: rect(3.087em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-1269"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 25.274em;"><span style="position: absolute; clip: rect(3.087em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-1270"><span class="mtable" id="MathJax-Span-1271" style="min-width: 25.274em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 25.274em;"><span style="display: inline-block; position: absolute; width: 20.118em; height: 0px; clip: rect(-0.905em, 1020.02em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -10.059em;"><span style="position: absolute; clip: rect(3.137em, 1020.02em, 4.397em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 20.118em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1020.02em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-1275"><span class="mrow" id="MathJax-Span-1276"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1020.02em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -10.059em;"><span class="mrow" id="MathJax-Span-1277"><span class="mi" id="MathJax-Span-1278" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1279" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1280" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1281" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1282" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1283" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1284" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1285" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1286" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1287" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1288" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1289" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1290" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-1291" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-1292" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mo" id="MathJax-Span-1293" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1294" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1295" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1296" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-1297" style="font-family: MathJax_Main; padding-left: 0.222em;">cos</span><span class="mo" id="MathJax-Span-1298"></span><span class="mrow" id="MathJax-Span-1299" style="padding-left: 0.167em;"><span class="msub" id="MathJax-Span-1300"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1301" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-1302"><span class="mi" id="MathJax-Span-1303" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1304" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1305" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1306" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1307" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1308" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-1309" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-1310" style="font-family: MathJax_Main; padding-left: 0.222em;">sin</span><span class="mo" id="MathJax-Span-1311"></span><span class="msub" id="MathJax-Span-1312" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1313" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-1314"><span class="mi" id="MathJax-Span-1315" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1316" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1317" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span class="mo" id="MathJax-Span-1318" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.778em; height: 0px; clip: rect(-0.855em, 1001.68em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-1272"><span class="mrow" id="MathJax-Span-1273"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.889em;"><span class="mtext" id="MathJax-Span-1274" style="font-family: MathJax_Main;">(11)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(11)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>−</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><mrow><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      station\_error=-(dx*\cos{\theta_{des}+dy*\sin{\theta_{des}}}) \tag{11}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-67"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(11)</mtext></mtd><mtd><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mo>−</mo><mo>(</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><mrow><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">station\_error=-(dx*\cos{\theta_{des}+dy*\sin{\theta_{des}}}) \tag{11}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.96952em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 1.06em; vertical-align: -0.31em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>对于横向误差的计算，可见代码<a href="https://github.com/ApolloAuto/apollo/blob/master/modules/control/controller/lat_controller.cc" rel="nofollow" target="_blank">lat_controller.cc</a>：</p>
<pre class="prettyprint"><code class="prism language-cpp has-numbering" onclick="mdcp.copyCode(event)">  <span class="token keyword">const</span> <span class="token keyword">double</span> cos_target_heading <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">double</span> sin_target_heading <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>target_point<span class="token punctuation">.</span><span class="token function">path_point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> lateral_error <span class="token operator">=</span> cos_target_heading <span class="token operator">*</span> dy <span class="token operator">-</span> sin_target_heading <span class="token operator">*</span> dx<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>FLAGS_enable_navigation_mode_error_filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
lateral_error <span class="token operator">=</span> lateral_error_filter_<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>lateral_error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

debug<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_lateral_error</span><span class="token punctuation">(</span>lateral_error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre>
<p>也就是：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-68-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(12)</mtext></mtd><mtd><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mi>d</mi><mi>y</mi><mo>&amp;#x2217;</mo><mi>cos</mi><mo>&amp;#x2061;</mo><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>&amp;#x2212;</mo><mi>d</mi><mi>x</mi><mo>&amp;#x2217;</mo><mi>sin</mi><mo>&amp;#x2061;</mo><msub><mi>&amp;#x3B8;</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      lateral\_error=dy*\cos{\theta_{des}}-dx*\sin{\theta_{des}} \tag{12}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1319" style="width: 100%; display: inline-block; min-width: 23.5em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 23.5em;"><span style="position: absolute; clip: rect(3.087em, 1018.34em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-1320"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 23.5em;"><span style="position: absolute; clip: rect(3.087em, 1018.34em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-1321"><span class="mtable" id="MathJax-Span-1322" style="min-width: 23.5em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 23.5em;"><span style="display: inline-block; position: absolute; width: 18.344em; height: 0px; clip: rect(-0.905em, 1018.34em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -9.172em;"><span style="position: absolute; clip: rect(3.182em, 1018.34em, 4.352em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 18.344em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.157em, 1018.34em, 4.327em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-1326"><span class="mrow" id="MathJax-Span-1327"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1018.34em, 4.327em, -1000em); top: -3.992em; left: 50%; margin-left: -9.172em;"><span class="mrow" id="MathJax-Span-1328"><span class="mi" id="MathJax-Span-1329" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1330" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1331" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1332" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1333" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1334" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1335" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1336" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1337" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1338" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1339" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1340" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1341" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-1342" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1343" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1344" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-1345" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-1346" style="font-family: MathJax_Main; padding-left: 0.222em;">cos</span><span class="mo" id="MathJax-Span-1347"></span><span class="msub" id="MathJax-Span-1348" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1349" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-1350"><span class="mi" id="MathJax-Span-1351" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1352" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1353" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1354" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-1355" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1356" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-1357" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mi" id="MathJax-Span-1358" style="font-family: MathJax_Main; padding-left: 0.222em;">sin</span><span class="mo" id="MathJax-Span-1359"></span><span class="msub" id="MathJax-Span-1360" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.575em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1000.46em, 4.132em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1361" style="font-family: MathJax_Math; font-style: italic;">θ</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.469em;"><span class="mrow" id="MathJax-Span-1362"><span class="mi" id="MathJax-Span-1363" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mi" id="MathJax-Span-1364" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1365" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.778em; height: 0px; clip: rect(-0.855em, 1001.68em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-1323"><span class="mrow" id="MathJax-Span-1324"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.889em;"><span class="mtext" id="MathJax-Span-1325" style="font-family: MathJax_Main;">(12)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(12)</mtext></mtd><mtd><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>−</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      lateral\_error=dy*\cos{\theta_{des}}-dx*\sin{\theta_{des}} \tag{12}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-68"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(12)</mtext></mtd><mtd><mrow><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>=</mo><mi>d</mi><mi>y</mi><mo>∗</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>−</mo><mi>d</mi><mi>x</mi><mo>∗</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mrow><mi>d</mi><mi>e</mi><mi>s</mi></mrow></msub></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">lateral\_error=dy*\cos{\theta_{des}}-dx*\sin{\theta_{des}} \tag{12}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height: 1.06em; vertical-align: -0.31em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>结合公式10、公式11、公式12，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant=&quot;normal&quot;>&amp;#xFF0C;</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      station\_error&amp;#xFF0C;lateral\_error</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1366" style="width: 14.538em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.19em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1012.17em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1367"><span style="display: inline-block; position: relative; width: 12.19em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1012.17em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1368"><span class="mrow" id="MathJax-Span-1369"><span class="mi" id="MathJax-Span-1370" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1371" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1372" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1373" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1374" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1375" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1376" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1377" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1378" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1379" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1380" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1381" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1382" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1383"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">，</span></span><span class="mi" id="MathJax-Span-1384" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1385" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1386" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1387" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1388" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1389" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1390" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1391" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1392" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1393" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1394" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1395" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1396" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.29em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">，</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">      station\_error，lateral\_error</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-69"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">，</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">station\_error，lateral\_error</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.00444em; vertical-align: -0.31em;"></span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord cjk_fallback">，</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>分别和<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>x</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup><mi mathvariant=&quot;normal&quot;>&amp;#xFF0C;</mi><msup><mi>y</mi><mo mathvariant=&quot;normal&quot;>&amp;#x2032;</mo></msup></mrow><annotation encoding=&quot;application/x-tex&quot;>      x'&amp;#xFF0C;y'</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1397" style="width: 2.606em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.159em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1002.16em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1398"><span style="display: inline-block; position: relative; width: 2.159em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1002.16em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-1399"><span class="mrow" id="MathJax-Span-1400"><span class="msup" id="MathJax-Span-1401"><span style="display: inline-block; position: relative; width: 0.841em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1402" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-1403" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-1404"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">，</span></span><span class="msup" id="MathJax-Span-1405"><span style="display: inline-block; position: relative; width: 0.817em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1406" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.548em;"><span class="mo" id="MathJax-Span-1407" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.296em; border-left: 0px solid; width: 0px; height: 1.299em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mi mathvariant="normal">，</mi><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">      x'，y'</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-70"><math><semantics><mrow><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mi mathvariant="normal">，</mi><msup><mi>y</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">x'，y'</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.946332em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span>的绝对值相等。且满足坐标系旋转过后，参考点和实际点间的直线距离是不变的规律：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-71-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(13)</mtext></mtd><mtd><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant=&quot;normal&quot;>_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup></mrow></msqrt></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      distance=\sqrt{dx^2+dy^2}=\sqrt{station\_error^2+lateral\_error^2}\tag{13}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1408" style="width: 100%; display: inline-block; min-width: 31.447em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 31.447em;"><span style="position: absolute; clip: rect(3.012em, 1026.29em, 4.472em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-1409"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 31.447em;"><span style="position: absolute; clip: rect(3.012em, 1026.29em, 4.472em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-1410"><span class="mtable" id="MathJax-Span-1411" style="min-width: 31.447em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 31.447em;"><span style="display: inline-block; position: absolute; width: 26.291em; height: 0px; clip: rect(-0.98em, 1026.29em, 0.48em, -1000em); top: 0em; left: 50%; margin-left: -13.146em;"><span style="position: absolute; clip: rect(3.012em, 1026.29em, 4.472em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 26.291em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.965em, 1026.29em, 4.425em, -1000em); top: -3.945em; left: 0em;"><span class="mtd" id="MathJax-Span-1415"><span class="mrow" id="MathJax-Span-1416"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.965em, 1026.29em, 4.425em, -1000em); top: -3.992em; left: 50%; margin-left: -13.146em;"><span class="mrow" id="MathJax-Span-1417"><span class="mi" id="MathJax-Span-1418" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1419" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1420" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1421" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1422" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1423" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1424" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1425" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-1426" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msqrt" id="MathJax-Span-1427" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 5.27em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1004.25em, 4.327em, -1000em); top: -3.992em; left: 1em;"><span class="mrow" id="MathJax-Span-1428"><span style="display: inline-block; position: relative; width: 4.245em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1004.25em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1429"><span class="mi" id="MathJax-Span-1430" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msup" id="MathJax-Span-1431"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1432" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.572em;"><span class="mn" id="MathJax-Span-1433" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1434" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1435" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msup" id="MathJax-Span-1436"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.5em, 4.327em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1437" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.548em;"><span class="mn" id="MathJax-Span-1438" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.589em, 1004.27em, 3.894em, -1000em); top: -4.616em; left: 1em;"><span style="display: inline-block; position: relative; width: 4.27em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: -0.084em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: 3.576em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.417em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.944em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 1.47em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 1.997em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 2.523em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 3.049em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.012em, 1001.02em, 4.472em, -1000em); top: -4.039em; left: 0em;"><span style="font-family: MathJax_Size1;">√</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1439" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msqrt" id="MathJax-Span-1440" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 14.627em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1013.77em, 4.204em, -1000em); top: -3.992em; left: 0.833em;"><span class="mrow" id="MathJax-Span-1441"><span style="display: inline-block; position: relative; width: 13.769em; height: 0px;"><span style="position: absolute; clip: rect(3.102em, 1013.77em, 4.204em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-1442"><span class="mi" id="MathJax-Span-1443" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1444" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1445" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1446" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1447" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1448" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1449" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1450" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1451" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1452" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1453" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1454" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="msup" id="MathJax-Span-1455"><span style="display: inline-block; position: relative; width: 0.88em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1456" style="font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.451em;"><span class="mn" id="MathJax-Span-1457" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-1458" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1459" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">l</span><span class="mi" id="MathJax-Span-1460" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1461" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1462" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1463" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1464" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1465" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1466" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-1467" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1468" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1469" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1470" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="msup" id="MathJax-Span-1471"><span style="display: inline-block; position: relative; width: 0.88em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.43em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-1472" style="font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.281em; left: 0.451em;"><span class="mn" id="MathJax-Span-1473" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.589em, 1013.79em, 3.894em, -1000em); top: -4.577em; left: 0.833em;"><span style="display: inline-block; position: relative; width: 13.794em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: -0.084em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -3.992em; left: 13.1em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.441em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 1.542em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 2.093em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 2.643em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 3.193em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 3.744em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 4.294em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 4.844em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 5.395em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 5.945em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 6.496em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 7.046em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 7.596em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 8.147em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 8.697em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 9.247em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 9.798em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 10.348em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 10.899em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 11.449em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 11.999em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -3.992em; left: 12.55em;">−<span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.062em, 1000.85em, 4.322em, -1000em); top: -4.05em; left: 0em;"><span style="font-family: MathJax_Main;">√</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.778em; height: 0px; clip: rect(-0.833em, 1001.68em, 0.427em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.945em; left: 0em;"><span class="mtd" id="MathJax-Span-1412"><span class="mrow" id="MathJax-Span-1413"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.68em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.889em;"><span class="mtext" id="MathJax-Span-1414" style="font-family: MathJax_Main;">(13)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.468em; border-left: 0px solid; width: 0px; height: 1.531em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(13)</mtext></mtd><mtd><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup></mrow></msqrt></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      distance=\sqrt{dx^2+dy^2}=\sqrt{station\_error^2+lateral\_error^2}\tag{13}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-71"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(13)</mtext></mtd><mtd><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><msqrt><mrow><mi>d</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><mi>l</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><msup><mi>r</mi><mn>2</mn></msup></mrow></msqrt></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">distance=\sqrt{dx^2+dy^2}=\sqrt{station\_error^2+lateral\_error^2}\tag{13}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.24em; vertical-align: -0.233291em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00671em;"><span class="svg-align" style="top: -3.2em;"><span class="pstrut" style="height: 3.2em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord mathit">d</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -2.96671em;"><span class="pstrut" style="height: 3.2em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.28em;"><svg width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.233291em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.84em; vertical-align: -0.591071em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.24893em;"><span class="svg-align" style="top: -3.8em;"><span class="pstrut" style="height: 3.8em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.20893em;"><span class="pstrut" style="height: 3.8em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.88em;"><svg width="400em" height="1.8800000000000001em" viewBox="0 0 400000 1944" preserveAspectRatio="xMinYMin slice"><path d="M1001,80H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,
572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,
-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39
c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60
s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,
-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5c4,-6.7,10,-10,18,-10z
M1001 80H400000v40H1013z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.591071em;"><span class=""></span></span></span></span></span></span><span class="tag"><span class="strut" style="height: 1.84em; vertical-align: -0.591071em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></span></p>

</div>
            <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet">
    
</body>
</html>