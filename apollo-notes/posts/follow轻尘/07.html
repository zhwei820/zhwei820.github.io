<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <div class="article-copyright">
                  					
        版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/u013914471/article/details/84324754				</div>
                                <div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                <!-- flowchart 箭头图标 勿删 -->
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
                <p></p><div class="toc"><h3><a name="t0"></a><a href="https://www.baidu.com/s?wd=Apollo&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="">Apollo</a>代码学习—MPC与LQR比较</h3><ul><li><a href="#_2" rel="nofollow" target="_self">前言</a></li><li><a href="#_16" rel="nofollow" target="_self">研究对象</a></li><li><a href="#_21" rel="nofollow" target="_self">状态方程</a></li><li><a href="#_33" rel="nofollow" target="_self">工作时域</a></li><li><a href="#_46" rel="nofollow" target="_self">目标函数</a></li><li><a href="#_56" rel="nofollow" target="_self">求解方法</a></li></ul></div><p></p>
<h1><a name="t1"></a><a id="_2" target="_blank"></a>前言</h1>
<p>Apollo中用到了PID、MPC和LQR三种控制器，其中，MPC和LQR控制器在状态方程的形式、状态变量的形式、目标函数的形式等有诸多相似之处，因此结合自己目前了解到的信息，将两者进行一定的比较。</p>
<p><strong>MPC( Model predictive control， 模型预测控制 )</strong> 和 <strong>LQR( Linear–quadratic regulator，线性二次调解器 )</strong> 在状态方程、控制实现等方面，有很多相似之处，但也有很多不同之处，如工作时域、最优解等，基于各自的理论基础，从研究对象、状态方程、目标函数、求解方法等方面， 对MPC和LQR做简要对比分析。对MPC的详细讲解请参考我的上一篇博文：<a href="https://blog.csdn.net/u013914471/article/details/83824490" rel="nofollow" target="_blank">Apollo代码学习(六)—模型预测控制(MPC)</a></p>
<p>本文主要参考内容：<br>
【1】<a href="https://download.csdn.net/download/u013914471/10739948" rel="nofollow" target="_blank">龚建伟, 姜岩, 徐威. 无人驾驶车辆模型预测控制[M]. 北京理工大学出版社, 2014.</a><br>
【2】<a href="https://en.wikipedia.org/wiki/Model_predictive_control" rel="nofollow" target="_blank">Model predictive control-Wikipedia</a><br>
【3】<a href="https://en.wikipedia.org/wiki/Linear%E2%80%93quadratic_regulator" rel="nofollow" target="_blank">Linear–quadratic regulator-Wikipedia</a><br>
【4】<a href="http://ctms.engin.umich.edu/CTMS/index.php?example=InvertedPendulum&amp;section=ControlStateSpace" rel="nofollow" target="_blank">Inverted Pendulum: State-Space Methods for Controller Design</a><br>
【5】<a href="http://xueshu.baidu.com/usercenter/paper/show?paperid=72dc155f25d40c521e74463ba0d20c09&amp;site=xueshu_se" rel="nofollow" target="_blank">王金城. 现代控制理论[M]. 化学工业出版社, 2007.</a></p>
<h1><a name="t2"></a><a id="_16" target="_blank"></a>研究对象</h1>
<p>LQR的研究对象是现代控制理论中以状态空间方程形式给出的线性系统。MPC的研究对象可以是线性系统，也可以是非线性系统，只不过为了某些需求，如时效性，计算的便捷，操控性等，一般会将非线性系统转换为线性系统进行计算。非线性系统的线性化可参考<a href="https://blog.csdn.net/u013914471/article/details/83824490" rel="nofollow" target="_blank">上一篇文章</a>。</p>
<p>Apollo中，LQR和MPC控制器都选用的单车动力学模型作为研究对象，单车动力学模型为非线性系统，但LQR和MPC控制器的目的是为了求最优控制解，在具体的优化求解时，均通过线性化方法将状态方程转化为线性方程进行求解，所以，可以说apollo中LQR和MPC控制器的研究对象均为线性系统。</p>
<h1><a name="t3"></a><a id="_21" target="_blank"></a>状态方程</h1>
<p>LQR的状态方程多以微分方程的形式给出，如：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mover accent=&quot;true&quot;><mi>x</mi><mo>&amp;#x2D9;</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \dot{x}=Ax+Bu \tag{1}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 100%; display: inline-block; min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-2"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="position: absolute; clip: rect(3.087em, 1005.76em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-3"><span class="mtable" id="MathJax-Span-4" style="min-width: 9.937em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.937em;"><span style="display: inline-block; position: absolute; width: 5.781em; height: 0px; clip: rect(-0.905em, 1005.76em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -2.891em;"><span style="position: absolute; clip: rect(3.171em, 1005.76em, 4.229em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.781em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-8"><span class="mrow" id="MathJax-Span-9"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1005.76em, 4.204em, -1000em); top: -3.992em; left: 50%; margin-left: -2.891em;"><span class="mrow" id="MathJax-Span-10"><span class="mover" id="MathJax-Span-11"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -3.993em; left: 0.064em;"><span class="mo" id="MathJax-Span-13" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-17" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-19" style="font-family: MathJax_Math; font-style: italic;">u</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-5"><span class="mrow" id="MathJax-Span-6"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-7" style="font-family: MathJax_Main;">(1)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \dot{x}=Ax+Bu \tag{1}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-1"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(1)</mtext></mtd><mtd><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi>u</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\dot{x}=Ax+Bu \tag{1}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66786em; vertical-align: 0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">x</span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.11111em;">˙</span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit">u</span></span><span class="tag"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
是一个连续线性系统，在计算过程中需要转换为如公式3的离散线性系统。<br>
MPC的状态方程可以为线性系统，可以为非线性系统，非线性系统形如下：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mover accent=&quot;true&quot;><mi>&amp;#x3BE;</mi><mo>&amp;#x2D9;</mo></mover><mo>=</mo><mi>f</mi><mo>(</mo><mi>&amp;#x3BE;</mi><mo separator=&quot;true&quot;>,</mo><mi>u</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      \dot{\xi}=f(\xi,u) \tag{2}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-20" style="width: 100%; display: inline-block; min-width: 9.333em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 9.333em;"><span style="position: absolute; clip: rect(2.712em, 1005em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-21"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.333em;"><span style="position: absolute; clip: rect(2.712em, 1005em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-22"><span class="mtable" id="MathJax-Span-23" style="min-width: 9.333em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 9.333em;"><span style="display: inline-block; position: absolute; width: 5.177em; height: 0px; clip: rect(-1.28em, 1005em, 0.78em, -1000em); top: 0em; left: 50%; margin-left: -2.589em;"><span style="position: absolute; clip: rect(2.712em, 1005em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.177em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.712em, 1005em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-27"><span class="mrow" id="MathJax-Span-28"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1005em, 4.772em, -1000em); top: -3.992em; left: 50%; margin-left: -2.589em;"><span class="mrow" id="MathJax-Span-29"><span class="mover" id="MathJax-Span-30"><span style="display: inline-block; position: relative; width: 0.639em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.44em, 4.327em, -1000em); top: -3.992em; left: 0.028em;"><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.193em, 1000.31em, 3.573em, -1000em); top: -4.255em; left: 0.139em;"><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main;">˙</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-33" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-34" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-35" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">u</span><span class="mo" id="MathJax-Span-39" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-24"><span class="mrow" id="MathJax-Span-25"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-26" style="font-family: MathJax_Main;">(2)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.825em; border-left: 0px solid; width: 0px; height: 2.244em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mover accent="true"><mi>ξ</mi><mo>˙</mo></mover><mo>=</mo><mi>f</mi><mo>(</mo><mi>ξ</mi><mo separator="true">,</mo><mi>u</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      \dot{\xi}=f(\xi,u) \tag{2}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-2"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(2)</mtext></mtd><mtd><mrow><mover accent="true"><mi>ξ</mi><mo>˙</mo></mover><mo>=</mo><mi>f</mi><mo>(</mo><mi>ξ</mi><mo separator="true">,</mo><mi>u</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">\dot{\xi}=f(\xi,u) \tag{2}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.12574em; vertical-align: -0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.04601em;">ξ</span></span></span><span class="" style="top: -3.26344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.02778em;">˙</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.04601em;">ξ</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">u</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 1.1813em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></span></p>
<p>线性系统如公式3所示：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>=</mo><mi>A</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>+</mo><mi>B</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      x(t+1)=Ax(t)+Bu(t) \tag{3}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-40" style="width: 100%; display: inline-block; min-width: 15.076em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 15.076em;"><span style="position: absolute; clip: rect(3.087em, 1010.83em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-41"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 15.076em;"><span style="position: absolute; clip: rect(3.087em, 1010.83em, 4.397em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-42"><span class="mtable" id="MathJax-Span-43" style="min-width: 15.076em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 15.076em;"><span style="display: inline-block; position: absolute; width: 10.92em; height: 0px; clip: rect(-0.905em, 1010.83em, 0.405em, -1000em); top: 0em; left: 50%; margin-left: -5.46em;"><span style="position: absolute; clip: rect(3.137em, 1010.83em, 4.397em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 10.92em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1010.83em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-47"><span class="mrow" id="MathJax-Span-48"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1010.83em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -5.46em;"><span class="mrow" id="MathJax-Span-49"><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-54" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-56" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-59" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-61" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-62" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-63" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">B</span><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-65" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-67" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.855em, 1001.18em, 0.405em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.967em; left: 0em;"><span class="mtd" id="MathJax-Span-44"><span class="mrow" id="MathJax-Span-45"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-46" style="font-family: MathJax_Main;">(3)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.379em; border-left: 0px solid; width: 0px; height: 1.353em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>=</mo><mi>A</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>+</mo><mi>B</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      x(t+1)=Ax(t)+Bu(t) \tag{3}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-3"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(3)</mtext></mtd><mtd><mrow><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>=</mo><mi>A</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>+</mo><mi>B</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">x(t+1)=Ax(t)+Bu(t) \tag{3}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
但LQR和MPC在计算求解时基本都是基于离散线性方程计算的。公式1可以很方便的转化为公式2的形式。离散化的方法可参考上一篇文章：<a href="https://blog.csdn.net/u013914471/article/details/83824490" rel="nofollow" target="_blank">Apollo代码学习(六)—模型预测控制(MPC)</a></p>
<p><span id="工作时域"></span></p>
<h1><a name="t4"></a><a id="_33" target="_blank"></a>工作时域</h1>
<p>按照<a href="https://en.wikipedia.org/wiki/Model_predictive_control" rel="nofollow" target="_blank">维基百科</a>的说法：</p>
<blockquote>
<p>The main differences between MPC and LQR are that LQR optimizes in a fixed time window (horizon) whereas MPC optimizes in a receding time window, and that a new solution is computed often whereas LQR uses the single (optimal) solution for the whole time horizon.</p>
</blockquote>
<p>LQR在一个固定的时域上求解，且一个时域内只有一个最优解，而MPC在一个逐渐消减的时域内( in a receding time window )求解最优解，且最优解经常更新。<br>
可以结合<a href="https://blog.csdn.net/u013914471/article/details/83824490" rel="nofollow" target="_blank">MPC的滚动优化</a>，以及图1进行理解：</p>
<div align="center"><img src="https://img-blog.csdnimg.cn/20181121141828265.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5MTQ0NzE=,size_16,color_FFFFFF,t_70"></div>
<center>图1 MPC和LQR的工作时域</center>
<p>针对同一工作时域<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mo>[</mo><mi>t</mi><mo separator=&quot;true&quot;>,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      [t, t+N]</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-68" style="width: 4.558em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.833em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1003.71em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-69"><span style="display: inline-block; position: relative; width: 3.833em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1003.71em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-70"><span class="mrow" id="MathJax-Span-71"><span class="mo" id="MathJax-Span-72" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-73" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-74" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">t</span><span class="mo" id="MathJax-Span-76" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-77" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-78" style="font-family: MathJax_Main;">]</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>[</mo><mi>t</mi><mo separator="true">,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">      [t, t+N]</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-4"><math><semantics><mrow><mo>[</mo><mi>t</mi><mo separator="true">,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[t, t+N]</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord mathit">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mclose">]</span></span></span></span></span>，LQR在该时域中，有唯一最优控制解<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>u</mi><mo>&amp;#x2217;</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      u^*(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-79" style="width: 2.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-80"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-81"><span class="mrow" id="MathJax-Span-82"><span class="msup" id="MathJax-Span-83"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-85" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-86" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-88" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      u^*(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-5"><math><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">u^*(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.688696em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>，而MPC仅在<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>t</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      t</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-89" style="width: 0.436em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.361em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.236em, 1000.33em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-90"><span style="display: inline-block; position: relative; width: 0.361em; height: 0px;"><span style="position: absolute; clip: rect(3.236em, 1000.33em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-91"><span class="mrow" id="MathJax-Span-92"><span class="mi" id="MathJax-Span-93" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">      t</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-6"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61508em; vertical-align: 0em;"></span><span class="mord mathit">t</span></span></span></span></span>时刻有最优解<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>u</mi><mo>&amp;#x2217;</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      u^*(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-94" style="width: 2.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-95"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-96"><span class="mrow" id="MathJax-Span-97"><span class="msup" id="MathJax-Span-98"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-100" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-103" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      u^*(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-7"><math><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">u^*(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.688696em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>，但它会计算出一个控制序列<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>U</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      U(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-104" style="width: 2.302em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.906em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1001.81em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-105"><span style="display: inline-block; position: relative; width: 1.906em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.81em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-106"><span class="mrow" id="MathJax-Span-107"><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.084em;"></span></span><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-111" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      U(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-8"><math><semantics><mrow><mi>U</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">U(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>，并仅将序列的第一个值<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>u</mi><mo>&amp;#x2217;</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      u^*(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-112" style="width: 2.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-113"><span style="display: inline-block; position: relative; width: 2.14em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.05em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-114"><span class="mrow" id="MathJax-Span-115"><span class="msup" id="MathJax-Span-116"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-118" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-121" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      u^*(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-9"><math><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">u^*(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.688696em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>作为控制量输出给控制系统，然后在下一采样时间结合车辆当前状况求取下一个最优控制解<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>u</mi><mo>&amp;#x2217;</mo></msup><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      u^*(t+1)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-122" style="width: 4.602em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.862em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1003.77em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-123"><span style="display: inline-block; position: relative; width: 3.862em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1003.77em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-124"><span class="mrow" id="MathJax-Span-125"><span class="msup" id="MathJax-Span-126"><span style="display: inline-block; position: relative; width: 1.001em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-127" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mo" id="MathJax-Span-128" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-129" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-131" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-132" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-133" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">      u^*(t+1)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-10"><math><semantics><mrow><msup><mi>u</mi><mo>∗</mo></msup><mo>(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">u^*(t+1)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.688696em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>，这就是MPC所谓的滚动优化。这么做的目的是为了使控制效果在一定时间内可期，并且能根据控制效果尽早调整控制变量，使实际状态更切合期望状态。<br>
此外，LQR的工作时域可以拓展到无限大，即可以求取无限时域的最优控制解，当然，一般并不会这么用。而MPC只针对有限时域。</p>
<h1><a name="t5"></a><a id="_46" target="_blank"></a>目标函数</h1>
<p>优化求解问题一般离不开目标函数的设计。<br>
LQR的目标函数的一般形式为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>T</mi></msup><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>&amp;#x222B;</mo><mrow><mi>t</mi><mn>0</mn></mrow><mrow><mi>t</mi><mi>f</mi></mrow></msubsup><mo>[</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>t</mi></msup><mi>R</mi><mi>u</mi><mo>]</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      J=\frac{1}{2}x^T(t_f)Q_0(t)x(t_f)+\frac{1}{2}\int_{t0}^{tf}[x^TQx+u^tRu]dt \tag{4}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-134" style="width: 100%; display: inline-block; min-width: 26.68em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 26.68em;"><span style="position: absolute; clip: rect(2.712em, 1022.49em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-135"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 26.68em;"><span style="position: absolute; clip: rect(2.712em, 1022.49em, 4.772em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-136"><span class="mtable" id="MathJax-Span-137" style="min-width: 26.68em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 26.68em;"><span style="display: inline-block; position: absolute; width: 22.524em; height: 0px; clip: rect(-1.28em, 1022.49em, 0.78em, -1000em); top: 0em; left: 50%; margin-left: -11.262em;"><span style="position: absolute; clip: rect(2.712em, 1022.49em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 22.524em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.712em, 1022.49em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-141"><span class="mrow" id="MathJax-Span-142"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1022.49em, 4.772em, -1000em); top: -3.992em; left: 50%; margin-left: -11.262em;"><span class="mrow" id="MathJax-Span-143"><span class="mi" id="MathJax-Span-144" style="font-family: MathJax_Math; font-style: italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.078em;"></span></span><span class="mo" id="MathJax-Span-145" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mfrac" id="MathJax-Span-146" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.474em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.391em, 1000.3em, 4.122em, -1000em); top: -4.386em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.32em, 4.122em, -1000em); top: -3.63em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-148" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.47em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.474em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="msup" id="MathJax-Span-149"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-151" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-152" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="msub" id="MathJax-Span-153"><span style="display: inline-block; position: relative; width: 0.825em; height: 0px;"><span style="position: absolute; clip: rect(3.236em, 1000.33em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-154" style="font-family: MathJax_Math; font-style: italic;">t</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.361em;"><span class="mi" id="MathJax-Span-155" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-156" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="msub" id="MathJax-Span-157"><span style="display: inline-block; position: relative; width: 1.22em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-158" style="font-family: MathJax_Math; font-style: italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.791em;"><span class="mn" id="MathJax-Span-159" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-160" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-161" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-162" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-164" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="msub" id="MathJax-Span-165"><span style="display: inline-block; position: relative; width: 0.825em; height: 0px;"><span style="position: absolute; clip: rect(3.236em, 1000.33em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-166" style="font-family: MathJax_Math; font-style: italic;">t</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.361em;"><span class="mi" id="MathJax-Span-167" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-168" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-169" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mfrac" id="MathJax-Span-170" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.474em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(3.391em, 1000.3em, 4.122em, -1000em); top: -4.386em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-171" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.32em, 4.122em, -1000em); top: -3.63em; left: 50%; margin-left: -0.177em;"><span class="mn" id="MathJax-Span-172" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(0.851em, 1000.47em, 1.172em, -1000em); top: -1.261em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.4px solid; width: 0.474em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.041em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-173" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.421em; height: 0px;"><span style="position: absolute; clip: rect(3.056em, 1000.61em, 4.428em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-174" style="font-family: MathJax_Size1; text-rendering: optimizelegibility; vertical-align: 0em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.138em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.363em, 1000.72em, 4.267em, -1000em); top: -4.524em; left: 0.701em;"><span class="mrow" id="MathJax-Span-175"><span class="mi" id="MathJax-Span-176" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-177" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.68em, 4.138em, -1000em); top: -3.651em; left: 0.472em;"><span class="mrow" id="MathJax-Span-178"><span class="mi" id="MathJax-Span-179" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span class="mn" id="MathJax-Span-180" style="font-size: 70.7%; font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-181" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">[</span></span><span class="msup" id="MathJax-Span-182"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-183" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-184" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-185" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-186" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-187" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msup" id="MathJax-Span-188" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.902em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-190" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-191" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-192" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-193" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">]</span></span><span class="mi" id="MathJax-Span-194" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-195" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.88em, 1001.18em, 0.38em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mtd" id="MathJax-Span-138"><span class="mrow" id="MathJax-Span-139"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-140" style="font-family: MathJax_Main;">(4)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.825em; border-left: 0px solid; width: 0px; height: 2.244em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>T</mi></msup><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>∫</mo><mrow><mi>t</mi><mn>0</mn></mrow><mrow><mi>t</mi><mi>f</mi></mrow></msubsup><mo>[</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>t</mi></msup><mi>R</mi><mi>u</mi><mo>]</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      J=\frac{1}{2}x^T(t_f)Q_0(t)x(t_f)+\frac{1}{2}\int_{t0}^{tf}[x^TQx+u^tRu]dt \tag{4}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-11"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(4)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>T</mi></msup><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>∫</mo><mrow><mi>t</mi><mn>0</mn></mrow><mrow><mi>t</mi><mi>f</mi></mrow></msubsup><mo>[</mo><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>+</mo><msup><mi>u</mi><mi>t</mi></msup><mi>R</mi><mi>u</mi><mo>]</mo><mi>d</mi><mi>t</mi></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">J=\frac{1}{2}x^T(t_f)Q_0(t)x(t_f)+\frac{1}{2}\int_{t0}^{tf}[x^TQx+u^tRu]dt \tag{4}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.51096em; vertical-align: -0.91195em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right: 0.44445em; position: relative; top: -0.001125em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.59901em;"><span class="" style="top: -1.78805em; margin-left: -0.44445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.8129em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.91195em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit">Q</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.09356em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.843556em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit">u</span><span class="mclose">]</span><span class="mord mathit">d</span><span class="mord mathit">t</span></span><span class="tag"><span class="strut" style="height: 2.51096em; vertical-align: -0.91195em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      x(t_f)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-196" style="width: 2.606em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.175em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.08em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-197"><span style="display: inline-block; position: relative; width: 2.175em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.08em, 4.421em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-198"><span class="mrow" id="MathJax-Span-199"><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-201" style=""><span style="font-family: MathJax_Main;">(</span></span><span class="msub" id="MathJax-Span-202"><span style="display: inline-block; position: relative; width: 0.825em; height: 0px;"><span style="position: absolute; clip: rect(3.236em, 1000.33em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-203" style="font-family: MathJax_Math; font-style: italic;">t</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.838em; left: 0.361em;"><span class="mi" id="MathJax-Span-204" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-205" style=""><span style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.407em; border-left: 0px solid; width: 0px; height: 1.352em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">      x(t_f)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-12"><math><semantics><mrow><mi>x</mi><mo>(</mo><msub><mi>t</mi><mi>f</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">x(t_f)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>为终端状态，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      Q_0(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-206" style="width: 2.823em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.359em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1002.26em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-207"><span style="display: inline-block; position: relative; width: 2.359em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1002.26em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-208"><span class="mrow" id="MathJax-Span-209"><span class="msub" id="MathJax-Span-210"><span style="display: inline-block; position: relative; width: 1.22em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-211" style="font-family: MathJax_Math; font-style: italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.791em;"><span class="mn" id="MathJax-Span-212" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-213" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-214" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-215" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      Q_0(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-13"><math><semantics><mrow><msub><mi>Q</mi><mn>0</mn></msub><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_0(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>为正定的终端加权矩阵，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>x</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      x</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-216" style="width: 0.696em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-217"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-218"><span class="mrow" id="MathJax-Span-219"><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.642em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">      x</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-14"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">x</span></span></span></span></span>为状态变量，多为各种误差，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>u</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      u</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-221" style="width: 0.696em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-222"><span style="display: inline-block; position: relative; width: 0.572em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-223"><span class="mrow" id="MathJax-Span-224"><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math; font-style: italic;">u</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.065em; border-left: 0px solid; width: 0px; height: 0.642em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">      u</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-15"><math><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">u</span></span></span></span></span>为控制变量，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>Q</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Q</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-226" style="width: 0.957em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-227"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-228"><span class="mrow" id="MathJax-Span-229"><span class="mi" id="MathJax-Span-230" style="font-family: MathJax_Math; font-style: italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.172em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">      Q</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-16"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathit">Q</span></span></span></span></span>为半正定的状态加权矩阵，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>R</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      R</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-231" style="width: 0.913em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-232"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.76em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-233"><span class="mrow" id="MathJax-Span-234"><span class="mi" id="MathJax-Span-235" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.077em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">      R</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-17"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span></span></span>为正定的控制加权矩阵，实际应用中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>Q</mi><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><mi>R</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      Q&amp;#x3001;R</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-236" style="width: 2.432em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.05em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1002.05em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-237"><span style="display: inline-block; position: relative; width: 2.05em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1002.05em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-238"><span class="mrow" id="MathJax-Span-239"><span class="mi" id="MathJax-Span-240" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-241"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="mi" id="MathJax-Span-242" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.29em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mi mathvariant="normal">、</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">      Q、R</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-18"><math><semantics><mrow><mi>Q</mi><mi mathvariant="normal">、</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">Q、R</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathit">Q</span><span class="mord cjk_fallback">、</span><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span></span></span>多为对角矩阵。<br>
MPC的目标函数的一般形式为：<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax MathJax_FullWidth" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mtable side=&quot;right&quot;><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><mo>+</mo><munderover><mo>&amp;#x2211;</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mo>(</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant=&quot;normal&quot;>&amp;#x2223;</mi><mi>t</mi><msup><mo>)</mo><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant=&quot;normal&quot;>&amp;#x2223;</mi><mi>t</mi><mo>)</mo><mo>+</mo><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn><msup><mo>)</mo><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo>)</mo><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding=&quot;application/x-tex&quot;>      J=x(t+N)Q_0x(t+N)+\sum_{i=1}^N(x(t+i|t)^TQx(t+i|t)+u(t+i-1)^TRu(t+i-1)) \tag{5}</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-243" style="width: 100%; display: inline-block; min-width: 43.927em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 119%; min-width: 43.927em;"><span style="position: absolute; clip: rect(2.609em, 1039.59em, 4.874em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-244"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 43.927em;"><span style="position: absolute; clip: rect(2.609em, 1039.59em, 4.874em, -1000em); top: -3.992em; left: 0em; width: 100%;"><span class="semantics" id="MathJax-Span-245"><span class="mtable" id="MathJax-Span-246" style="min-width: 43.927em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; min-width: 43.927em;"><span style="display: inline-block; position: absolute; width: 39.771em; height: 0px; clip: rect(-1.383em, 1039.59em, 0.883em, -1000em); top: 0em; left: 50%; margin-left: -19.885em;"><span style="position: absolute; clip: rect(2.609em, 1039.59em, 4.874em, -1000em); top: -3.992em; left: 0em;"><span style="display: inline-block; position: relative; width: 39.771em; height: 0px;"><span style="position: absolute; width: 100%; clip: rect(2.507em, 1039.59em, 4.772em, -1000em); top: -3.889em; left: 0em;"><span class="mtd" id="MathJax-Span-250"><span class="mrow" id="MathJax-Span-251"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.507em, 1039.59em, 4.772em, -1000em); top: -3.992em; left: 50%; margin-left: -19.885em;"><span class="mrow" id="MathJax-Span-252"><span class="mi" id="MathJax-Span-253" style="font-family: MathJax_Math; font-style: italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.078em;"></span></span><span class="mo" id="MathJax-Span-254" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-255" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-256" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-257" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-258" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-259" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-260" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="msub" id="MathJax-Span-261"><span style="display: inline-block; position: relative; width: 1.22em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-262" style="font-family: MathJax_Math; font-style: italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.791em;"><span class="mn" id="MathJax-Span-263" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-264" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-265" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-266" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-267" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-268" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-269" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-270" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="munderover" id="MathJax-Span-271" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 2.279em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-272" style="font-family: MathJax_Size1; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.379em, 1000.7em, 4.122em, -1000em); top: -4.469em; left: 1.056em;"><span class="mi" id="MathJax-Span-273" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1001.22em, 4.13em, -1000em); top: -3.707em; left: 1.056em;"><span class="mrow" id="MathJax-Span-274"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.391em, 1001.1em, 4.13em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-275" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-276" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-277" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mo" id="MathJax-Span-278" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-279" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-280" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-281" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-282" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-283" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">i</span><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Main;">∣</span><span class="mi" id="MathJax-Span-285" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="msup" id="MathJax-Span-286" style=""><span style="display: inline-block; position: relative; width: 1.17em; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1000.42em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-287" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.868em; left: 0.597em;"><span class="mi" id="MathJax-Span-288" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-289" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-290" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-291" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-292" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-293" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-294" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">i</span><span class="mi" id="MathJax-Span-295" style="font-family: MathJax_Main;">∣</span><span class="mi" id="MathJax-Span-296" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-297" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-298" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-299" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">u</span><span class="mo" id="MathJax-Span-300" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-301" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-302" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-303" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">i</span><span class="mo" id="MathJax-Span-304" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-305" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="msup" id="MathJax-Span-306" style=""><span style="display: inline-block; position: relative; width: 1.17em; height: 0px;"><span style="position: absolute; clip: rect(2.712em, 1000.42em, 4.772em, -1000em); top: -3.992em; left: 0em;"><span class="mo" id="MathJax-Span-307" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.868em; left: 0.597em;"><span class="mi" id="MathJax-Span-308" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-309" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-310" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-311" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">(</span></span><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-314" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">i</span><span class="mo" id="MathJax-Span-315" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-316" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-317" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span><span class="mo" id="MathJax-Span-318" style="vertical-align: 0em;"><span style="font-family: MathJax_Size2;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; position: absolute; width: 1.278em; height: 0px; clip: rect(-0.777em, 1001.18em, 0.483em, -1000em); top: 0em; right: 0em; margin-right: 0em;"><span style="position: absolute; width: 100%; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.889em; left: 0em;"><span class="mtd" id="MathJax-Span-247"><span class="mrow" id="MathJax-Span-248"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.18em, 4.372em, -1000em); top: -3.992em; left: 50%; margin-left: -0.639em;"><span class="mtext" id="MathJax-Span-249" style="font-family: MathJax_Main;">(5)</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.947em; border-left: 0px solid; width: 0px; height: 2.489em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mo>(</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mi>t</mi><msup><mo>)</mo><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>)</mo><mo>+</mo><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>−</mo><mn>1</mn><msup><mo>)</mo><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">      J=x(t+N)Q_0x(t+N)+\sum_{i=1}^N(x(t+i|t)^TQx(t+i|t)+u(t+i-1)^TRu(t+i-1)) \tag{5}</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-19"><math><semantics><mtable side="right"><mlabeledtr><mtd><mtext>(5)</mtext></mtd><mtd><mrow><mi>J</mi><mo>=</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><msub><mi>Q</mi><mn>0</mn></msub><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>)</mo><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mo>(</mo><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mi>t</mi><msup><mo>)</mo><mi>T</mi></msup><mi>Q</mi><mi>x</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>)</mo><mo>+</mo><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>−</mo><mn>1</mn><msup><mo>)</mo><mi>T</mi></msup><mi>R</mi><mi>u</mi><mo>(</mo><mi>t</mi><mo>+</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>)</mo></mrow></mtd></mlabeledtr></mtable><annotation encoding="application/x-tex">J=x(t+N)Q_0x(t+N)+\sum_{i=1}^N(x(t+i|t)^TQx(t+i|t)+u(t+i-1)^TRu(t+i-1)) \tag{5}</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.10601em; vertical-align: -1.27767em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.82834em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.14133em; vertical-align: -0.25em;"></span><span class="mord mathit">i</span><span class="mord">∣</span><span class="mord mathit">t</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit">Q</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">i</span><span class="mord">∣</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.74285em; vertical-align: -0.08333em;"></span><span class="mord mathit">i</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.14133em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.74285em; vertical-align: -0.08333em;"></span><span class="mord mathit">i</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height: 3.10601em; vertical-align: -1.27767em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></span><br>
其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>x</mi><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><mi>u</mi><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><msub><mi>Q</mi><mn>0</mn></msub><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><mi>Q</mi><mi mathvariant=&quot;normal&quot;>&amp;#x3001;</mi><mi>R</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      x&amp;#x3001;u&amp;#x3001;Q_0&amp;#x3001;Q&amp;#x3001;R</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-319" style="width: 7.031em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.914em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.062em, 1005.91em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-320"><span style="display: inline-block; position: relative; width: 5.914em; height: 0px;"><span style="position: absolute; clip: rect(3.062em, 1005.91em, 4.322em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-321"><span class="mrow" id="MathJax-Span-322"><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-324"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-326"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="msub" id="MathJax-Span-327"><span style="display: inline-block; position: relative; width: 1.22em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.74em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-328" style="font-family: MathJax_Math; font-style: italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -3.842em; left: 0.791em;"><span class="mn" id="MathJax-Span-329" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-330"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="mi" id="MathJax-Span-331" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-332"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 84%; font-style: normal; font-weight: normal;">、</span></span><span class="mi" id="MathJax-Span-333" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.29em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">、</mi><mi>u</mi><mi mathvariant="normal">、</mi><msub><mi>Q</mi><mn>0</mn></msub><mi mathvariant="normal">、</mi><mi>Q</mi><mi mathvariant="normal">、</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">      x、u、Q_0、Q、R</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-20"><math><semantics><mrow><mi>x</mi><mi mathvariant="normal">、</mi><mi>u</mi><mi mathvariant="normal">、</mi><msub><mi>Q</mi><mn>0</mn></msub><mi mathvariant="normal">、</mi><mi>Q</mi><mi mathvariant="normal">、</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">x、u、Q_0、Q、R</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathit">x</span><span class="mord cjk_fallback">、</span><span class="mord mathit">u</span><span class="mord cjk_fallback">、</span><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord mathit">Q</span><span class="mord cjk_fallback">、</span><span class="mord mathit" style="margin-right: 0.00773em;">R</span></span></span></span></span>的定义同上。<br>
从形式上可以看出，LQR的目标函数为积分形式，MPC的目标函数为求和形式，但其实都是对代价的累计。两者第一部分均为终端代价函数，当系统对终端状态要求极严的情况下才添加，一般情况下可省略。<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      x^TQx</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-334" style="width: 2.996em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.508em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.02em, 1002.46em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-335"><span style="display: inline-block; position: relative; width: 2.508em; height: 0px;"><span style="position: absolute; clip: rect(3.02em, 1002.46em, 4.316em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-336"><span class="mrow" id="MathJax-Span-337"><span class="msup" id="MathJax-Span-338"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.52em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-339" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-340" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-341" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-342" style="font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.336em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">      x^TQx</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-21"><math><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup><mi>Q</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">x^TQx</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03577em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit">Q</span><span class="mord mathit">x</span></span></span></span></span>项代表跟踪代价，表示跟踪过程中误差的大小，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      u^TRu</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-343" style="width: 2.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.476em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.02em, 1002.46em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-344"><span style="display: inline-block; position: relative; width: 2.476em; height: 0px;"><span style="position: absolute; clip: rect(3.02em, 1002.46em, 4.143em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-345"><span class="mrow" id="MathJax-Span-346"><span class="msup" id="MathJax-Span-347"><span style="display: inline-block; position: relative; width: 1.145em; height: 0px;"><span style="position: absolute; clip: rect(3.42em, 1000.55em, 4.133em, -1000em); top: -3.992em; left: 0em;"><span class="mi" id="MathJax-Span-348" style="font-family: MathJax_Math; font-style: italic;">u</span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span><span style="position: absolute; top: -4.355em; left: 0.572em;"><span class="mi" id="MathJax-Span-349" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span class="mi" id="MathJax-Span-350" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-351" style="font-family: MathJax_Math; font-style: italic;">u</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.077em; border-left: 0px solid; width: 0px; height: 1.13em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi></mrow><annotation encoding="application/x-tex">      u^TRu</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-22"><math><semantics><mrow><msup><mi>u</mi><mi>T</mi></msup><mi>R</mi><mi>u</mi></mrow><annotation encoding="application/x-tex">u^TRu</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.841331em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathit">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit">u</span></span></span></span></span>项代表控制代价，表示对控制的约束或要求等。</p>
<h1><a name="t6"></a><a id="_56" target="_blank"></a>求解方法</h1>
<p>正如<a href="#%E5%B7%A5%E4%BD%9C%E6%97%B6%E5%9F%9F" rel="nofollow" target="_self">工作时域</a>所述，针对同一工作时域，LQR有唯一最优控制解，也就是在该控制周期内，LQR只进行一次计算。而MPC滚动优化的思想，使其给出该时域内的一组控制序列对应不同的采样时刻（采样周期和控制周期不一定相同），但是只将该序列的第一个值输出给被控系统，作为该时刻的最优控制解。因此，对于工作时域<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mo>[</mo><mi>t</mi><mo separator=&quot;true&quot;>,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      [t, t+N]</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-352" style="width: 4.558em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.833em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1003.71em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-353"><span style="display: inline-block; position: relative; width: 3.833em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1003.71em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-354"><span class="mrow" id="MathJax-Span-355"><span class="mo" id="MathJax-Span-356" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-357" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-358" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">t</span><span class="mo" id="MathJax-Span-360" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-361" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-362" style="font-family: MathJax_Main;">]</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>[</mo><mi>t</mi><mo separator="true">,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">      [t, t+N]</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-23"><math><semantics><mrow><mo>[</mo><mi>t</mi><mo separator="true">,</mo><mi>t</mi><mo>+</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[t, t+N]</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord mathit">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mclose">]</span></span></span></span></span>，LQR只有唯一解，MPC可能有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>N</mi></mrow><annotation encoding=&quot;application/x-tex&quot;>      N</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-363" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-364"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.89em, 4.122em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-365"><span class="mrow" id="MathJax-Span-366"><span class="mi" id="MathJax-Span-367" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.052em; border-left: 0px solid; width: 0px; height: 0.916em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">      N</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-24"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span></span></span></span></span>个解。</p>
<p>最优控制解的求取多基于目标函数进行，取线性约束下的目标函数的极值为最优控制解。对于系统为线性，目标函数为状态变量和控制变量的二次型函数的线性二次性问题，一般线性二次性问题的最优解具有统一的解析表达式。apollo中的MPC将优化问题转化为二次规划问题，利用二次规划求解器进行求解。横向控制中用的是LQR调节器，它通过假设控制量<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><semantics><mrow><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding=&quot;application/x-tex&quot;>      u(t)</annotation></semantics></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-368" style="width: 2.042em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.711em; height: 0px; font-size: 119%;"><span style="position: absolute; clip: rect(3.112em, 1001.62em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="mrow" id="MathJax-Span-369"><span style="display: inline-block; position: relative; width: 1.711em; height: 0px;"><span style="position: absolute; clip: rect(3.112em, 1001.62em, 4.372em, -1000em); top: -3.992em; left: 0em;"><span class="semantics" id="MathJax-Span-370"><span class="mrow" id="MathJax-Span-371"><span class="mi" id="MathJax-Span-372" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mo" id="MathJax-Span-373" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-374" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-375" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">      u(t)</annotation></semantics></math></span></span><script type="math/mml" id="MathJax-Element-25"><math><semantics><mrow><mi>u</mi><mo>(</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">u(t)</annotation></semantics></math></script></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">u</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span>不受约束，利用变分法求解。</p>
<p>此外，LQR对整个适于进行优化求解，且求解过程中假设控制量不受约束，但是实际情况下，控制量是有约束的。而MPC通常在比整个时域更小的时间窗口中解决优化问题，因此可能获得次优解，且对线性不作任何假设，它能够处理硬约束以及非线性系统偏离其线性化工作点的迁移，这两者都是LQR的缺点。</p>

</div>
            <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet">
    
</body>
</html>